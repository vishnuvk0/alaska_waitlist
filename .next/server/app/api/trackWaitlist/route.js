"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/trackWaitlist/route";
exports.ids = ["app/api/trackWaitlist/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "puppeteer":
/*!****************************!*\
  !*** external "puppeteer" ***!
  \****************************/
/***/ ((module) => {

module.exports = require("puppeteer");

/***/ }),

/***/ "sqlite3":
/*!**************************!*\
  !*** external "sqlite3" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("sqlite3");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("buffer");

/***/ }),

/***/ "child_process":
/*!********************************!*\
  !*** external "child_process" ***!
  \********************************/
/***/ ((module) => {

module.exports = require("child_process");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "node:assert":
/*!******************************!*\
  !*** external "node:assert" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:assert");

/***/ }),

/***/ "node:async_hooks":
/*!***********************************!*\
  !*** external "node:async_hooks" ***!
  \***********************************/
/***/ ((module) => {

module.exports = require("node:async_hooks");

/***/ }),

/***/ "node:buffer":
/*!******************************!*\
  !*** external "node:buffer" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:buffer");

/***/ }),

/***/ "node:console":
/*!*******************************!*\
  !*** external "node:console" ***!
  \*******************************/
/***/ ((module) => {

module.exports = require("node:console");

/***/ }),

/***/ "node:crypto":
/*!******************************!*\
  !*** external "node:crypto" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:crypto");

/***/ }),

/***/ "node:diagnostics_channel":
/*!*******************************************!*\
  !*** external "node:diagnostics_channel" ***!
  \*******************************************/
/***/ ((module) => {

module.exports = require("node:diagnostics_channel");

/***/ }),

/***/ "node:events":
/*!******************************!*\
  !*** external "node:events" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:events");

/***/ }),

/***/ "node:http":
/*!****************************!*\
  !*** external "node:http" ***!
  \****************************/
/***/ ((module) => {

module.exports = require("node:http");

/***/ }),

/***/ "node:http2":
/*!*****************************!*\
  !*** external "node:http2" ***!
  \*****************************/
/***/ ((module) => {

module.exports = require("node:http2");

/***/ }),

/***/ "node:net":
/*!***************************!*\
  !*** external "node:net" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("node:net");

/***/ }),

/***/ "node:perf_hooks":
/*!**********************************!*\
  !*** external "node:perf_hooks" ***!
  \**********************************/
/***/ ((module) => {

module.exports = require("node:perf_hooks");

/***/ }),

/***/ "node:querystring":
/*!***********************************!*\
  !*** external "node:querystring" ***!
  \***********************************/
/***/ ((module) => {

module.exports = require("node:querystring");

/***/ }),

/***/ "node:stream":
/*!******************************!*\
  !*** external "node:stream" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:stream");

/***/ }),

/***/ "node:tls":
/*!***************************!*\
  !*** external "node:tls" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("node:tls");

/***/ }),

/***/ "node:url":
/*!***************************!*\
  !*** external "node:url" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("node:url");

/***/ }),

/***/ "node:util":
/*!****************************!*\
  !*** external "node:util" ***!
  \****************************/
/***/ ((module) => {

module.exports = require("node:util");

/***/ }),

/***/ "node:util/types":
/*!**********************************!*\
  !*** external "node:util/types" ***!
  \**********************************/
/***/ ((module) => {

module.exports = require("node:util/types");

/***/ }),

/***/ "node:worker_threads":
/*!**************************************!*\
  !*** external "node:worker_threads" ***!
  \**************************************/
/***/ ((module) => {

module.exports = require("node:worker_threads");

/***/ }),

/***/ "node:zlib":
/*!****************************!*\
  !*** external "node:zlib" ***!
  \****************************/
/***/ ((module) => {

module.exports = require("node:zlib");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "string_decoder":
/*!*********************************!*\
  !*** external "string_decoder" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("string_decoder");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2FtrackWaitlist%2Froute&page=%2Fapi%2FtrackWaitlist%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2FtrackWaitlist%2Froute.ts&appDir=%2FUsers%2Fviviku%2FDownloads%2Falaska_waitlist_api%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fviviku%2FDownloads%2Falaska_waitlist_api&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2FtrackWaitlist%2Froute&page=%2Fapi%2FtrackWaitlist%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2FtrackWaitlist%2Froute.ts&appDir=%2FUsers%2Fviviku%2FDownloads%2Falaska_waitlist_api%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fviviku%2FDownloads%2Falaska_waitlist_api&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_viviku_Downloads_alaska_waitlist_api_app_api_trackWaitlist_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/trackWaitlist/route.ts */ \"(rsc)/./app/api/trackWaitlist/route.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_Users_viviku_Downloads_alaska_waitlist_api_app_api_trackWaitlist_route_ts__WEBPACK_IMPORTED_MODULE_3__]);\n_Users_viviku_Downloads_alaska_waitlist_api_app_api_trackWaitlist_route_ts__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/trackWaitlist/route\",\n        pathname: \"/api/trackWaitlist\",\n        filename: \"route\",\n        bundlePath: \"app/api/trackWaitlist/route\"\n    },\n    resolvedPagePath: \"/Users/viviku/Downloads/alaska_waitlist_api/app/api/trackWaitlist/route.ts\",\n    nextConfigOutput,\n    userland: _Users_viviku_Downloads_alaska_waitlist_api_app_api_trackWaitlist_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/trackWaitlist/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZ0cmFja1dhaXRsaXN0JTJGcm91dGUmcGFnZT0lMkZhcGklMkZ0cmFja1dhaXRsaXN0JTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGdHJhY2tXYWl0bGlzdCUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRnZpdmlrdSUyRkRvd25sb2FkcyUyRmFsYXNrYV93YWl0bGlzdF9hcGklMkZhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPSUyRlVzZXJzJTJGdml2aWt1JTJGRG93bmxvYWRzJTJGYWxhc2thX3dhaXRsaXN0X2FwaSZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUMwQjtBQUN2RztBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLHVHQUF1RztBQUMvRztBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQzZKOztBQUU3SixxQyIsInNvdXJjZXMiOlsid2VicGFjazovL2FsYXNrYS13YWl0bGlzdC1hcGkvPzNiMjIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiL1VzZXJzL3ZpdmlrdS9Eb3dubG9hZHMvYWxhc2thX3dhaXRsaXN0X2FwaS9hcHAvYXBpL3RyYWNrV2FpdGxpc3Qvcm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL3RyYWNrV2FpdGxpc3Qvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS90cmFja1dhaXRsaXN0XCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS90cmFja1dhaXRsaXN0L3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiL1VzZXJzL3ZpdmlrdS9Eb3dubG9hZHMvYWxhc2thX3dhaXRsaXN0X2FwaS9hcHAvYXBpL3RyYWNrV2FpdGxpc3Qvcm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgaGVhZGVySG9va3MsIHN0YXRpY0dlbmVyYXRpb25CYWlsb3V0IH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvdHJhY2tXYWl0bGlzdC9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBoZWFkZXJIb29rcywgc3RhdGljR2VuZXJhdGlvbkJhaWxvdXQsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2FtrackWaitlist%2Froute&page=%2Fapi%2FtrackWaitlist%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2FtrackWaitlist%2Froute.ts&appDir=%2FUsers%2Fviviku%2FDownloads%2Falaska_waitlist_api%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fviviku%2FDownloads%2Falaska_waitlist_api&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/trackWaitlist/route.ts":
/*!****************************************!*\
  !*** ./app/api/trackWaitlist/route.ts ***!
  \****************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n/* harmony import */ var _lib_waitlist__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/waitlist */ \"(rsc)/./app/lib/waitlist.ts\");\n/* harmony import */ var _lib_rate_limiter__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/rate-limiter */ \"(rsc)/./app/lib/rate-limiter.ts\");\n/* harmony import */ var _lib_server_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/server-utils */ \"(rsc)/./app/lib/server-utils.ts\");\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/lib/db */ \"(rsc)/./app/lib/db.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_lib_waitlist__WEBPACK_IMPORTED_MODULE_1__, _lib_db__WEBPACK_IMPORTED_MODULE_4__]);\n([_lib_waitlist__WEBPACK_IMPORTED_MODULE_1__, _lib_db__WEBPACK_IMPORTED_MODULE_4__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\nasync function POST(request) {\n    try {\n        const body = await request.json();\n        const { flightNumber, flightDate, userName } = body;\n        if (!flightNumber || !flightDate || !userName) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Missing required fields.\"\n            }, {\n                status: 400\n            });\n        }\n        const flightKey = `${flightNumber}|${flightDate}`;\n        // Check rate limit\n        if (!_lib_rate_limiter__WEBPACK_IMPORTED_MODULE_2__.rateLimiter.canScrape(flightKey)) {\n            const waitTime = _lib_rate_limiter__WEBPACK_IMPORTED_MODULE_2__.rateLimiter.getTimeUntilNextScrape(flightKey);\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Rate limit exceeded\",\n                waitTimeMs: waitTime,\n                message: `Please wait ${Math.ceil(waitTime / 1000)} seconds before trying again.`\n            }, {\n                status: 429\n            });\n        }\n        (0,_lib_server_utils__WEBPACK_IMPORTED_MODULE_3__.debugLog)(`Processing waitlist request for flight ${flightNumber} on ${flightDate} for user ${userName}`);\n        const result = await (0,_lib_waitlist__WEBPACK_IMPORTED_MODULE_1__.trackWaitlist)(flightNumber, flightDate, userName);\n        // Log database state after successful tracking\n        await (0,_lib_server_utils__WEBPACK_IMPORTED_MODULE_3__.logDatabaseState)(_lib_db__WEBPACK_IMPORTED_MODULE_4__[\"default\"]);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json(result);\n    } catch (error) {\n        console.error(\"Error in trackWaitlist API:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            error: error.message || \"Internal server error\"\n        }, {\n            status: error.status || 500\n        });\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL3RyYWNrV2FpdGxpc3Qvcm91dGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQTJDO0FBQ0k7QUFDRTtBQUNlO0FBQ3RDO0FBRW5CLGVBQWVNLEtBQUtDLE9BQWdCO0lBQ3pDLElBQUk7UUFDRixNQUFNQyxPQUFPLE1BQU1ELFFBQVFFLElBQUk7UUFDL0IsTUFBTSxFQUFFQyxZQUFZLEVBQUVDLFVBQVUsRUFBRUMsUUFBUSxFQUFFLEdBQUdKO1FBRS9DLElBQUksQ0FBQ0UsZ0JBQWdCLENBQUNDLGNBQWMsQ0FBQ0MsVUFBVTtZQUM3QyxPQUFPWixrRkFBWUEsQ0FBQ1MsSUFBSSxDQUN0QjtnQkFBRUksT0FBTztZQUEyQixHQUNwQztnQkFBRUMsUUFBUTtZQUFJO1FBRWxCO1FBRUEsTUFBTUMsWUFBWSxDQUFDLEVBQUVMLGFBQWEsQ0FBQyxFQUFFQyxXQUFXLENBQUM7UUFFakQsbUJBQW1CO1FBQ25CLElBQUksQ0FBQ1QsMERBQVdBLENBQUNjLFNBQVMsQ0FBQ0QsWUFBWTtZQUNyQyxNQUFNRSxXQUFXZiwwREFBV0EsQ0FBQ2dCLHNCQUFzQixDQUFDSDtZQUNwRCxPQUFPZixrRkFBWUEsQ0FBQ1MsSUFBSSxDQUFDO2dCQUN2QkksT0FBTztnQkFDUE0sWUFBWUY7Z0JBQ1pHLFNBQVMsQ0FBQyxZQUFZLEVBQUVDLEtBQUtDLElBQUksQ0FBQ0wsV0FBVyxNQUFNLDZCQUE2QixDQUFDO1lBQ25GLEdBQUc7Z0JBQUVILFFBQVE7WUFBSTtRQUNuQjtRQUVBWCwyREFBUUEsQ0FBQyxDQUFDLHVDQUF1QyxFQUFFTyxhQUFhLElBQUksRUFBRUMsV0FBVyxVQUFVLEVBQUVDLFNBQVMsQ0FBQztRQUN2RyxNQUFNVyxTQUFTLE1BQU10Qiw0REFBYUEsQ0FBQ1MsY0FBY0MsWUFBWUM7UUFFN0QsK0NBQStDO1FBQy9DLE1BQU1SLG1FQUFnQkEsQ0FBQ0MsK0NBQUVBO1FBRXpCLE9BQU9MLGtGQUFZQSxDQUFDUyxJQUFJLENBQUNjO0lBQzNCLEVBQUUsT0FBT1YsT0FBWTtRQUNuQlcsUUFBUVgsS0FBSyxDQUFDLCtCQUErQkE7UUFDN0MsT0FBT2Isa0ZBQVlBLENBQUNTLElBQUksQ0FDdEI7WUFBRUksT0FBT0EsTUFBTU8sT0FBTyxJQUFJO1FBQXdCLEdBQ2xEO1lBQUVOLFFBQVFELE1BQU1DLE1BQU0sSUFBSTtRQUFJO0lBRWxDO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hbGFza2Etd2FpdGxpc3QtYXBpLy4vYXBwL2FwaS90cmFja1dhaXRsaXN0L3JvdXRlLnRzPzUzM2YiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInO1xuaW1wb3J0IHsgdHJhY2tXYWl0bGlzdCB9IGZyb20gJ0AvbGliL3dhaXRsaXN0JztcbmltcG9ydCB7IHJhdGVMaW1pdGVyIH0gZnJvbSAnQC9saWIvcmF0ZS1saW1pdGVyJztcbmltcG9ydCB7IGRlYnVnTG9nLCBsb2dEYXRhYmFzZVN0YXRlIH0gZnJvbSAnQC9saWIvc2VydmVyLXV0aWxzJztcbmltcG9ydCBkYiBmcm9tICdAL2xpYi9kYic7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcXVlc3Q6IFJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBib2R5ID0gYXdhaXQgcmVxdWVzdC5qc29uKCk7XG4gICAgY29uc3QgeyBmbGlnaHROdW1iZXIsIGZsaWdodERhdGUsIHVzZXJOYW1lIH0gPSBib2R5O1xuXG4gICAgaWYgKCFmbGlnaHROdW1iZXIgfHwgIWZsaWdodERhdGUgfHwgIXVzZXJOYW1lKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgZXJyb3I6ICdNaXNzaW5nIHJlcXVpcmVkIGZpZWxkcy4nIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDAgfVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBjb25zdCBmbGlnaHRLZXkgPSBgJHtmbGlnaHROdW1iZXJ9fCR7ZmxpZ2h0RGF0ZX1gO1xuICAgIFxuICAgIC8vIENoZWNrIHJhdGUgbGltaXRcbiAgICBpZiAoIXJhdGVMaW1pdGVyLmNhblNjcmFwZShmbGlnaHRLZXkpKSB7XG4gICAgICBjb25zdCB3YWl0VGltZSA9IHJhdGVMaW1pdGVyLmdldFRpbWVVbnRpbE5leHRTY3JhcGUoZmxpZ2h0S2V5KTtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IFxuICAgICAgICBlcnJvcjogJ1JhdGUgbGltaXQgZXhjZWVkZWQnLFxuICAgICAgICB3YWl0VGltZU1zOiB3YWl0VGltZSxcbiAgICAgICAgbWVzc2FnZTogYFBsZWFzZSB3YWl0ICR7TWF0aC5jZWlsKHdhaXRUaW1lIC8gMTAwMCl9IHNlY29uZHMgYmVmb3JlIHRyeWluZyBhZ2Fpbi5gXG4gICAgICB9LCB7IHN0YXR1czogNDI5IH0pO1xuICAgIH1cblxuICAgIGRlYnVnTG9nKGBQcm9jZXNzaW5nIHdhaXRsaXN0IHJlcXVlc3QgZm9yIGZsaWdodCAke2ZsaWdodE51bWJlcn0gb24gJHtmbGlnaHREYXRlfSBmb3IgdXNlciAke3VzZXJOYW1lfWApO1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRyYWNrV2FpdGxpc3QoZmxpZ2h0TnVtYmVyLCBmbGlnaHREYXRlLCB1c2VyTmFtZSk7XG4gICAgXG4gICAgLy8gTG9nIGRhdGFiYXNlIHN0YXRlIGFmdGVyIHN1Y2Nlc3NmdWwgdHJhY2tpbmdcbiAgICBhd2FpdCBsb2dEYXRhYmFzZVN0YXRlKGRiKTtcbiAgICBcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24ocmVzdWx0KTtcbiAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIHRyYWNrV2FpdGxpc3QgQVBJOicsIGVycm9yKTtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7IGVycm9yOiBlcnJvci5tZXNzYWdlIHx8ICdJbnRlcm5hbCBzZXJ2ZXIgZXJyb3InIH0sXG4gICAgICB7IHN0YXR1czogZXJyb3Iuc3RhdHVzIHx8IDUwMCB9XG4gICAgKTtcbiAgfVxufSAiXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwidHJhY2tXYWl0bGlzdCIsInJhdGVMaW1pdGVyIiwiZGVidWdMb2ciLCJsb2dEYXRhYmFzZVN0YXRlIiwiZGIiLCJQT1NUIiwicmVxdWVzdCIsImJvZHkiLCJqc29uIiwiZmxpZ2h0TnVtYmVyIiwiZmxpZ2h0RGF0ZSIsInVzZXJOYW1lIiwiZXJyb3IiLCJzdGF0dXMiLCJmbGlnaHRLZXkiLCJjYW5TY3JhcGUiLCJ3YWl0VGltZSIsImdldFRpbWVVbnRpbE5leHRTY3JhcGUiLCJ3YWl0VGltZU1zIiwibWVzc2FnZSIsIk1hdGgiLCJjZWlsIiwicmVzdWx0IiwiY29uc29sZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/trackWaitlist/route.ts\n");

/***/ }),

/***/ "(rsc)/./app/lib/browser-utils.ts":
/*!**********************************!*\
  !*** ./app/lib/browser-utils.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createPage: () => (/* binding */ createPage),\n/* harmony export */   getBrowser: () => (/* binding */ getBrowser),\n/* harmony export */   handlePressAndHoldVerification: () => (/* binding */ handlePressAndHoldVerification),\n/* harmony export */   initBrowser: () => (/* binding */ initBrowser),\n/* harmony export */   needsVerification: () => (/* binding */ needsVerification)\n/* harmony export */ });\n/* harmony import */ var puppeteer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! puppeteer */ \"puppeteer\");\n/* harmony import */ var puppeteer__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(puppeteer__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _server_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./server-utils */ \"(rsc)/./app/lib/server-utils.ts\");\n/* harmony import */ var child_process__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! child_process */ \"child_process\");\n/* harmony import */ var child_process__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(child_process__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\nlet browserInstance = null;\nlet connectionRetries = 0;\nconst MAX_RETRIES = 3;\nconst WS_ENDPOINT_RETRIES = 3;\nfunction getRandomBrowserConfig() {\n    const screenWidth = 1920;\n    const screenHeight = 1080;\n    const osVersion = 10 + Math.floor(Math.random() * 3);\n    const chromeVersion = 110 + Math.floor(Math.random() * 10);\n    const userAgent = `Mozilla/5.0 (Macintosh; Intel Mac OS X ${osVersion}_${Math.floor(Math.random() * 9)}) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/${chromeVersion}.0.0.0 Safari/537.36`;\n    return {\n        viewport: {\n            width: screenWidth,\n            height: screenHeight\n        },\n        userAgent,\n        args: [\n            \"--no-sandbox\",\n            \"--disable-setuid-sandbox\",\n            \"--disable-web-security\",\n            \"--disable-features=IsolateOrigins\",\n            \"--disable-site-isolation-trials\",\n            \"--disable-features=BlockInsecurePrivateNetworkRequests\",\n            `--window-size=${screenWidth},${screenHeight}`,\n            \"--disable-dev-shm-usage\",\n            \"--disable-gpu\",\n            \"--no-first-run\",\n            \"--no-default-browser-check\",\n            \"--disable-infobars\",\n            \"--disable-notifications\",\n            `--user-agent=${userAgent}`,\n            \"--disable-extensions\",\n            \"--disable-component-extensions-with-background-pages\",\n            \"--disable-default-apps\",\n            \"--enable-features=NetworkService,NetworkServiceInProcess\",\n            \"--disable-background-timer-throttling\",\n            \"--disable-backgrounding-occluded-windows\",\n            \"--disable-breakpad\",\n            \"--disable-component-update\",\n            \"--disable-domain-reliability\",\n            \"--disable-sync\",\n            \"--force-color-profile=srgb\",\n            \"--metrics-recording-only\",\n            \"--disable-features=TranslateUI\",\n            \"--disable-renderer-backgrounding\",\n            \"--disable-background-networking\",\n            \"--disable-ipc-flooding-protection\",\n            \"--enable-automation\",\n            \"--password-store=basic\",\n            \"--use-mock-keychain\",\n            \"--disable-blink-features=AutomationControlled\"\n        ]\n    };\n}\nasync function initBrowser() {\n    try {\n        if (browserInstance) {\n            try {\n                await browserInstance.close();\n            } catch (e) {\n                (0,_server_utils__WEBPACK_IMPORTED_MODULE_1__.debugLog)(\"Failed to close existing browser: \" + (e instanceof Error ? e.message : \"Unknown error\"));\n            }\n            browserInstance = null;\n        }\n        // Kill any existing Chrome processes that might interfere\n        if (process.platform === \"darwin\") {\n            await new Promise((resolve)=>{\n                (0,child_process__WEBPACK_IMPORTED_MODULE_2__.exec)('pkill -f \"(Google Chrome)\"', ()=>resolve());\n            });\n            await new Promise((r)=>setTimeout(r, 1000));\n        }\n        const config = getRandomBrowserConfig();\n        let wsEndpointRetries = WS_ENDPOINT_RETRIES;\n        let browser;\n        while(wsEndpointRetries > 0){\n            try {\n                const executablePath = process.platform === \"darwin\" ? \"/Applications/Google Chrome.app/Contents/MacOS/Google Chrome\" : undefined;\n                browser = await puppeteer__WEBPACK_IMPORTED_MODULE_0___default().launch({\n                    headless: true,\n                    args: config.args,\n                    defaultViewport: config.viewport,\n                    executablePath,\n                    env: {\n                        ...process.env,\n                        DISPLAY: process.env.DISPLAY || \":0\"\n                    }\n                });\n                // Test the connection immediately\n                await new Promise((r)=>setTimeout(r, 1000));\n                const pages = await browser.pages();\n                if (pages.length === 0) {\n                    const testPage = await browser.newPage();\n                    await testPage.setUserAgent(config.userAgent);\n                    await testPage.evaluate(()=>navigator.userAgent);\n                    await testPage.close();\n                } else {\n                    await pages[0].setUserAgent(config.userAgent);\n                    await pages[0].evaluate(()=>navigator.userAgent);\n                }\n                // Set up disconnect handler\n                let reconnectTimeout;\n                browser.on(\"disconnected\", async ()=>{\n                    (0,_server_utils__WEBPACK_IMPORTED_MODULE_1__.debugLog)(\"Browser disconnected, attempting to reconnect...\");\n                    if (browserInstance === browser) {\n                        try {\n                            const pages = await browser.pages().catch(()=>[]);\n                            await Promise.all(pages.map((page)=>page.close().catch(()=>{})));\n                            await browser.close().catch(()=>{});\n                        } catch (e) {\n                            (0,_server_utils__WEBPACK_IMPORTED_MODULE_1__.debugLog)(\"Error cleaning up disconnected browser: \" + (e instanceof Error ? e.message : \"Unknown error\"));\n                        }\n                        browserInstance = null;\n                    }\n                    if (reconnectTimeout) clearTimeout(reconnectTimeout);\n                    reconnectTimeout = setTimeout(async ()=>{\n                        if (connectionRetries < MAX_RETRIES) {\n                            connectionRetries++;\n                            (0,_server_utils__WEBPACK_IMPORTED_MODULE_1__.debugLog)(`Reconnection attempt ${connectionRetries}/${MAX_RETRIES}`);\n                            try {\n                                browserInstance = await initBrowser();\n                                connectionRetries = 0;\n                            } catch (e) {\n                                (0,_server_utils__WEBPACK_IMPORTED_MODULE_1__.debugLog)(\"Failed to reconnect: \" + (e instanceof Error ? e.message : \"Unknown error\"));\n                                if (process.platform === \"darwin\") {\n                                    (0,child_process__WEBPACK_IMPORTED_MODULE_2__.exec)('pkill -f \"(Google Chrome)\"');\n                                }\n                            }\n                        } else {\n                            (0,_server_utils__WEBPACK_IMPORTED_MODULE_1__.debugLog)(\"Max reconnection attempts reached\");\n                            connectionRetries = 0;\n                        }\n                    }, 5000);\n                });\n                browserInstance = browser;\n                return browser;\n            } catch (e) {\n                (0,_server_utils__WEBPACK_IMPORTED_MODULE_1__.debugLog)(`Browser connection failed (attempt ${WS_ENDPOINT_RETRIES - wsEndpointRetries + 1}): ${e instanceof Error ? e.message : \"Unknown error\"}`);\n                if (browser) {\n                    try {\n                        const pages = await browser.pages().catch(()=>[]);\n                        await Promise.all(pages.map((page)=>page.close().catch(()=>{})));\n                        await browser.close().catch(()=>{});\n                    } catch (closeError) {\n                        (0,_server_utils__WEBPACK_IMPORTED_MODULE_1__.debugLog)(\"Error closing browser: \" + (closeError instanceof Error ? closeError.message : \"Unknown error\"));\n                    }\n                }\n                wsEndpointRetries--;\n                if (wsEndpointRetries === 0) throw e;\n                const delay = Math.min(1000 * Math.pow(2, WS_ENDPOINT_RETRIES - wsEndpointRetries), 10000);\n                await new Promise((r)=>setTimeout(r, delay));\n            }\n        }\n        throw new Error(\"Failed to initialize browser after all retries\");\n    } catch (error) {\n        (0,_server_utils__WEBPACK_IMPORTED_MODULE_1__.debugLog)(\"Browser initialization error: \" + (error instanceof Error ? error.message : \"Unknown error\"));\n        throw error;\n    }\n}\nasync function getBrowser() {\n    if (!browserInstance || !browserInstance.isConnected()) {\n        browserInstance = await initBrowser();\n    }\n    return browserInstance;\n}\nasync function createPage() {\n    const browser = await getBrowser();\n    const page = await browser.newPage();\n    // Set viewport and user agent\n    const config = getRandomBrowserConfig();\n    await page.setViewport(config.viewport);\n    await page.setUserAgent(config.userAgent);\n    // Set up error handling for the page\n    page.on(\"error\", (err)=>{\n        (0,_server_utils__WEBPACK_IMPORTED_MODULE_1__.debugLog)(\"Page error: \" + err.message);\n    });\n    page.on(\"pageerror\", (err)=>{\n        (0,_server_utils__WEBPACK_IMPORTED_MODULE_1__.debugLog)(\"Page error: \" + (err instanceof Error ? err.message : String(err)));\n    });\n    return page;\n}\nasync function needsVerification(page) {\n    try {\n        const verificationElement = await page.$(\"#px-captcha\");\n        return !!verificationElement;\n    } catch (error) {\n        (0,_server_utils__WEBPACK_IMPORTED_MODULE_1__.debugLog)(\"Error checking verification: \" + (error instanceof Error ? error.message : \"Unknown error\"));\n        return false;\n    }\n}\nasync function handlePressAndHoldVerification(page, maxRetries = 2) {\n    let retries = 0;\n    while(retries < maxRetries){\n        try {\n            const verificationButton = await page.$(\"#px-captcha\");\n            if (!verificationButton) {\n                return false;\n            }\n            const boundingBox = await verificationButton.boundingBox();\n            if (!boundingBox) {\n                return false;\n            }\n            const x = boundingBox.x + boundingBox.width / 2;\n            const y = boundingBox.y + boundingBox.height / 2;\n            // Random mouse movement before clicking\n            const randomMove = ()=>{\n                const offsetX = Math.random() * 100 - 50;\n                const offsetY = Math.random() * 100 - 50;\n                return page.mouse.move(x + offsetX, y + offsetY);\n            };\n            await randomMove();\n            await new Promise((r)=>setTimeout(r, Math.random() * 500 + 200));\n            await randomMove();\n            await new Promise((r)=>setTimeout(r, Math.random() * 500 + 200));\n            await page.mouse.move(x, y);\n            await page.mouse.down();\n            await new Promise((resolve)=>setTimeout(resolve, 3000));\n            await page.mouse.up();\n            // Wait for verification to complete\n            await page.waitForFunction(()=>!document.querySelector(\"#px-captcha\"), {\n                timeout: 10000\n            });\n            return true;\n        } catch (error) {\n            (0,_server_utils__WEBPACK_IMPORTED_MODULE_1__.debugLog)(\"Error handling verification: \" + (error instanceof Error ? error.message : \"Unknown error\"));\n            retries++;\n            if (retries === maxRetries) {\n                return false;\n            }\n            await new Promise((r)=>setTimeout(r, 1000));\n        }\n    }\n    return false;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QzFCLE9BQU87WUFDVDtZQUNBLE1BQU0sSUFBSTNDLFFBQVFFLENBQUFBLElBQUtDLFdBQVdELEdBQUc7UUFDdkM7SUFDRjtJQUNBLE9BQU87QUFDVCIsInNvdXJjZXMiOlsid2VicGFjazovL2FsYXNrYS13YWl0bGlzdC1hcGkvLi9hcHAvbGliL2Jyb3dzZXItdXRpbHMudHM/Mzg1MyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgcHVwcGV0ZWVyLCB7IEJyb3dzZXIsIFBhZ2UgfSBmcm9tICdwdXBwZXRlZXInO1xuaW1wb3J0IHsgZGVidWdMb2cgfSBmcm9tICcuL3NlcnZlci11dGlscyc7XG5pbXBvcnQgeyBleGVjIH0gZnJvbSAnY2hpbGRfcHJvY2Vzcyc7XG5cbmxldCBicm93c2VySW5zdGFuY2U6IEJyb3dzZXIgfCBudWxsID0gbnVsbDtcbmxldCBjb25uZWN0aW9uUmV0cmllcyA9IDA7XG5jb25zdCBNQVhfUkVUUklFUyA9IDM7XG5jb25zdCBXU19FTkRQT0lOVF9SRVRSSUVTID0gMztcblxuaW50ZXJmYWNlIEJyb3dzZXJDb25maWcge1xuICB2aWV3cG9ydDoge1xuICAgIHdpZHRoOiBudW1iZXI7XG4gICAgaGVpZ2h0OiBudW1iZXI7XG4gIH07XG4gIHVzZXJBZ2VudDogc3RyaW5nO1xuICBhcmdzOiBzdHJpbmdbXTtcbn1cblxuZnVuY3Rpb24gZ2V0UmFuZG9tQnJvd3NlckNvbmZpZygpOiBCcm93c2VyQ29uZmlnIHtcbiAgY29uc3Qgc2NyZWVuV2lkdGggPSAxOTIwO1xuICBjb25zdCBzY3JlZW5IZWlnaHQgPSAxMDgwO1xuICBjb25zdCBvc1ZlcnNpb24gPSAxMCArIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDMpO1xuICBjb25zdCBjaHJvbWVWZXJzaW9uID0gMTEwICsgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTApO1xuICBjb25zdCB1c2VyQWdlbnQgPSBgTW96aWxsYS81LjAgKE1hY2ludG9zaDsgSW50ZWwgTWFjIE9TIFggJHtvc1ZlcnNpb259XyR7TWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogOSl9KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvJHtjaHJvbWVWZXJzaW9ufS4wLjAuMCBTYWZhcmkvNTM3LjM2YDtcbiAgXG4gIHJldHVybiB7XG4gICAgdmlld3BvcnQ6IHsgd2lkdGg6IHNjcmVlbldpZHRoLCBoZWlnaHQ6IHNjcmVlbkhlaWdodCB9LFxuICAgIHVzZXJBZ2VudCxcbiAgICBhcmdzOiBbXG4gICAgICAnLS1uby1zYW5kYm94JyxcbiAgICAgICctLWRpc2FibGUtc2V0dWlkLXNhbmRib3gnLFxuICAgICAgJy0tZGlzYWJsZS13ZWItc2VjdXJpdHknLFxuICAgICAgJy0tZGlzYWJsZS1mZWF0dXJlcz1Jc29sYXRlT3JpZ2lucycsXG4gICAgICAnLS1kaXNhYmxlLXNpdGUtaXNvbGF0aW9uLXRyaWFscycsXG4gICAgICAnLS1kaXNhYmxlLWZlYXR1cmVzPUJsb2NrSW5zZWN1cmVQcml2YXRlTmV0d29ya1JlcXVlc3RzJyxcbiAgICAgIGAtLXdpbmRvdy1zaXplPSR7c2NyZWVuV2lkdGh9LCR7c2NyZWVuSGVpZ2h0fWAsXG4gICAgICAnLS1kaXNhYmxlLWRldi1zaG0tdXNhZ2UnLFxuICAgICAgJy0tZGlzYWJsZS1ncHUnLFxuICAgICAgJy0tbm8tZmlyc3QtcnVuJyxcbiAgICAgICctLW5vLWRlZmF1bHQtYnJvd3Nlci1jaGVjaycsXG4gICAgICAnLS1kaXNhYmxlLWluZm9iYXJzJyxcbiAgICAgICctLWRpc2FibGUtbm90aWZpY2F0aW9ucycsXG4gICAgICBgLS11c2VyLWFnZW50PSR7dXNlckFnZW50fWAsXG4gICAgICAnLS1kaXNhYmxlLWV4dGVuc2lvbnMnLFxuICAgICAgJy0tZGlzYWJsZS1jb21wb25lbnQtZXh0ZW5zaW9ucy13aXRoLWJhY2tncm91bmQtcGFnZXMnLFxuICAgICAgJy0tZGlzYWJsZS1kZWZhdWx0LWFwcHMnLFxuICAgICAgJy0tZW5hYmxlLWZlYXR1cmVzPU5ldHdvcmtTZXJ2aWNlLE5ldHdvcmtTZXJ2aWNlSW5Qcm9jZXNzJyxcbiAgICAgICctLWRpc2FibGUtYmFja2dyb3VuZC10aW1lci10aHJvdHRsaW5nJyxcbiAgICAgICctLWRpc2FibGUtYmFja2dyb3VuZGluZy1vY2NsdWRlZC13aW5kb3dzJyxcbiAgICAgICctLWRpc2FibGUtYnJlYWtwYWQnLFxuICAgICAgJy0tZGlzYWJsZS1jb21wb25lbnQtdXBkYXRlJyxcbiAgICAgICctLWRpc2FibGUtZG9tYWluLXJlbGlhYmlsaXR5JyxcbiAgICAgICctLWRpc2FibGUtc3luYycsXG4gICAgICAnLS1mb3JjZS1jb2xvci1wcm9maWxlPXNyZ2InLFxuICAgICAgJy0tbWV0cmljcy1yZWNvcmRpbmctb25seScsXG4gICAgICAnLS1kaXNhYmxlLWZlYXR1cmVzPVRyYW5zbGF0ZVVJJyxcbiAgICAgICctLWRpc2FibGUtcmVuZGVyZXItYmFja2dyb3VuZGluZycsXG4gICAgICAnLS1kaXNhYmxlLWJhY2tncm91bmQtbmV0d29ya2luZycsXG4gICAgICAnLS1kaXNhYmxlLWlwYy1mbG9vZGluZy1wcm90ZWN0aW9uJyxcbiAgICAgICctLWVuYWJsZS1hdXRvbWF0aW9uJyxcbiAgICAgICctLXBhc3N3b3JkLXN0b3JlPWJhc2ljJyxcbiAgICAgICctLXVzZS1tb2NrLWtleWNoYWluJyxcbiAgICAgICctLWRpc2FibGUtYmxpbmstZmVhdHVyZXM9QXV0b21hdGlvbkNvbnRyb2xsZWQnXG4gICAgXVxuICB9O1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaW5pdEJyb3dzZXIoKTogUHJvbWlzZTxCcm93c2VyPiB7XG4gIHRyeSB7XG4gICAgaWYgKGJyb3dzZXJJbnN0YW5jZSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgYXdhaXQgYnJvd3Nlckluc3RhbmNlLmNsb3NlKCk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGRlYnVnTG9nKCdGYWlsZWQgdG8gY2xvc2UgZXhpc3RpbmcgYnJvd3NlcjogJyArIChlIGluc3RhbmNlb2YgRXJyb3IgPyBlLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcicpKTtcbiAgICAgIH1cbiAgICAgIGJyb3dzZXJJbnN0YW5jZSA9IG51bGw7XG4gICAgfVxuXG4gICAgLy8gS2lsbCBhbnkgZXhpc3RpbmcgQ2hyb21lIHByb2Nlc3NlcyB0aGF0IG1pZ2h0IGludGVyZmVyZVxuICAgIGlmIChwcm9jZXNzLnBsYXRmb3JtID09PSAnZGFyd2luJykge1xuICAgICAgYXdhaXQgbmV3IFByb21pc2U8dm9pZD4oKHJlc29sdmUpID0+IHtcbiAgICAgICAgZXhlYygncGtpbGwgLWYgXCIoR29vZ2xlIENocm9tZSlcIicsICgpID0+IHJlc29sdmUoKSk7XG4gICAgICB9KTtcbiAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHIgPT4gc2V0VGltZW91dChyLCAxMDAwKSk7XG4gICAgfVxuXG4gICAgY29uc3QgY29uZmlnID0gZ2V0UmFuZG9tQnJvd3NlckNvbmZpZygpO1xuICAgIGxldCB3c0VuZHBvaW50UmV0cmllcyA9IFdTX0VORFBPSU5UX1JFVFJJRVM7XG4gICAgbGV0IGJyb3dzZXI6IEJyb3dzZXI7XG5cbiAgICB3aGlsZSAod3NFbmRwb2ludFJldHJpZXMgPiAwKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBleGVjdXRhYmxlUGF0aCA9IHByb2Nlc3MucGxhdGZvcm0gPT09ICdkYXJ3aW4nIFxuICAgICAgICAgID8gJy9BcHBsaWNhdGlvbnMvR29vZ2xlIENocm9tZS5hcHAvQ29udGVudHMvTWFjT1MvR29vZ2xlIENocm9tZSdcbiAgICAgICAgICA6IHVuZGVmaW5lZDtcblxuICAgICAgICBicm93c2VyID0gYXdhaXQgcHVwcGV0ZWVyLmxhdW5jaCh7XG4gICAgICAgICAgaGVhZGxlc3M6IHRydWUsXG4gICAgICAgICAgYXJnczogY29uZmlnLmFyZ3MsXG4gICAgICAgICAgZGVmYXVsdFZpZXdwb3J0OiBjb25maWcudmlld3BvcnQsXG4gICAgICAgICAgZXhlY3V0YWJsZVBhdGgsXG4gICAgICAgICAgZW52OiB7XG4gICAgICAgICAgICAuLi5wcm9jZXNzLmVudixcbiAgICAgICAgICAgIERJU1BMQVk6IHByb2Nlc3MuZW52LkRJU1BMQVkgfHwgJzowJ1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gVGVzdCB0aGUgY29ubmVjdGlvbiBpbW1lZGlhdGVseVxuICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyID0+IHNldFRpbWVvdXQociwgMTAwMCkpO1xuICAgICAgICBjb25zdCBwYWdlcyA9IGF3YWl0IGJyb3dzZXIucGFnZXMoKTtcbiAgICAgICAgaWYgKHBhZ2VzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIGNvbnN0IHRlc3RQYWdlID0gYXdhaXQgYnJvd3Nlci5uZXdQYWdlKCk7XG4gICAgICAgICAgYXdhaXQgdGVzdFBhZ2Uuc2V0VXNlckFnZW50KGNvbmZpZy51c2VyQWdlbnQpO1xuICAgICAgICAgIGF3YWl0IHRlc3RQYWdlLmV2YWx1YXRlKCgpID0+IG5hdmlnYXRvci51c2VyQWdlbnQpO1xuICAgICAgICAgIGF3YWl0IHRlc3RQYWdlLmNsb3NlKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYXdhaXQgcGFnZXNbMF0uc2V0VXNlckFnZW50KGNvbmZpZy51c2VyQWdlbnQpO1xuICAgICAgICAgIGF3YWl0IHBhZ2VzWzBdLmV2YWx1YXRlKCgpID0+IG5hdmlnYXRvci51c2VyQWdlbnQpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gU2V0IHVwIGRpc2Nvbm5lY3QgaGFuZGxlclxuICAgICAgICBsZXQgcmVjb25uZWN0VGltZW91dDogTm9kZUpTLlRpbWVvdXQ7XG4gICAgICAgIGJyb3dzZXIub24oJ2Rpc2Nvbm5lY3RlZCcsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICBkZWJ1Z0xvZygnQnJvd3NlciBkaXNjb25uZWN0ZWQsIGF0dGVtcHRpbmcgdG8gcmVjb25uZWN0Li4uJyk7XG4gICAgICAgICAgaWYgKGJyb3dzZXJJbnN0YW5jZSA9PT0gYnJvd3Nlcikge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgY29uc3QgcGFnZXMgPSBhd2FpdCBicm93c2VyLnBhZ2VzKCkuY2F0Y2goKCkgPT4gW10pO1xuICAgICAgICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChwYWdlcy5tYXAocGFnZSA9PiBwYWdlLmNsb3NlKCkuY2F0Y2goKCkgPT4ge30pKSk7XG4gICAgICAgICAgICAgIGF3YWl0IGJyb3dzZXIuY2xvc2UoKS5jYXRjaCgoKSA9PiB7fSk7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgIGRlYnVnTG9nKCdFcnJvciBjbGVhbmluZyB1cCBkaXNjb25uZWN0ZWQgYnJvd3NlcjogJyArIChlIGluc3RhbmNlb2YgRXJyb3IgPyBlLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcicpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyb3dzZXJJbnN0YW5jZSA9IG51bGw7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKHJlY29ubmVjdFRpbWVvdXQpIGNsZWFyVGltZW91dChyZWNvbm5lY3RUaW1lb3V0KTtcblxuICAgICAgICAgIHJlY29ubmVjdFRpbWVvdXQgPSBzZXRUaW1lb3V0KGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGlmIChjb25uZWN0aW9uUmV0cmllcyA8IE1BWF9SRVRSSUVTKSB7XG4gICAgICAgICAgICAgIGNvbm5lY3Rpb25SZXRyaWVzKys7XG4gICAgICAgICAgICAgIGRlYnVnTG9nKGBSZWNvbm5lY3Rpb24gYXR0ZW1wdCAke2Nvbm5lY3Rpb25SZXRyaWVzfS8ke01BWF9SRVRSSUVTfWApO1xuICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGJyb3dzZXJJbnN0YW5jZSA9IGF3YWl0IGluaXRCcm93c2VyKCk7XG4gICAgICAgICAgICAgICAgY29ubmVjdGlvblJldHJpZXMgPSAwO1xuICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgZGVidWdMb2coJ0ZhaWxlZCB0byByZWNvbm5lY3Q6ICcgKyAoZSBpbnN0YW5jZW9mIEVycm9yID8gZS5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InKSk7XG4gICAgICAgICAgICAgICAgaWYgKHByb2Nlc3MucGxhdGZvcm0gPT09ICdkYXJ3aW4nKSB7XG4gICAgICAgICAgICAgICAgICBleGVjKCdwa2lsbCAtZiBcIihHb29nbGUgQ2hyb21lKVwiJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBkZWJ1Z0xvZygnTWF4IHJlY29ubmVjdGlvbiBhdHRlbXB0cyByZWFjaGVkJyk7XG4gICAgICAgICAgICAgIGNvbm5lY3Rpb25SZXRyaWVzID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LCA1MDAwKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgYnJvd3Nlckluc3RhbmNlID0gYnJvd3NlcjtcbiAgICAgICAgcmV0dXJuIGJyb3dzZXI7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGRlYnVnTG9nKGBCcm93c2VyIGNvbm5lY3Rpb24gZmFpbGVkIChhdHRlbXB0ICR7V1NfRU5EUE9JTlRfUkVUUklFUyAtIHdzRW5kcG9pbnRSZXRyaWVzICsgMX0pOiAke2UgaW5zdGFuY2VvZiBFcnJvciA/IGUubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ31gKTtcbiAgICAgICAgaWYgKGJyb3dzZXIhKSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHBhZ2VzID0gYXdhaXQgYnJvd3NlciEucGFnZXMoKS5jYXRjaCgoKSA9PiBbXSk7XG4gICAgICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChwYWdlcy5tYXAocGFnZSA9PiBwYWdlLmNsb3NlKCkuY2F0Y2goKCkgPT4ge30pKSk7XG4gICAgICAgICAgICBhd2FpdCBicm93c2VyIS5jbG9zZSgpLmNhdGNoKCgpID0+IHt9KTtcbiAgICAgICAgICB9IGNhdGNoIChjbG9zZUVycm9yKSB7XG4gICAgICAgICAgICBkZWJ1Z0xvZygnRXJyb3IgY2xvc2luZyBicm93c2VyOiAnICsgKGNsb3NlRXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGNsb3NlRXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJykpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB3c0VuZHBvaW50UmV0cmllcy0tO1xuICAgICAgICBpZiAod3NFbmRwb2ludFJldHJpZXMgPT09IDApIHRocm93IGU7XG4gICAgICAgIGNvbnN0IGRlbGF5ID0gTWF0aC5taW4oMTAwMCAqIE1hdGgucG93KDIsIFdTX0VORFBPSU5UX1JFVFJJRVMgLSB3c0VuZHBvaW50UmV0cmllcyksIDEwMDAwKTtcbiAgICAgICAgYXdhaXQgbmV3IFByb21pc2UociA9PiBzZXRUaW1lb3V0KHIsIGRlbGF5KSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gaW5pdGlhbGl6ZSBicm93c2VyIGFmdGVyIGFsbCByZXRyaWVzJyk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgZGVidWdMb2coJ0Jyb3dzZXIgaW5pdGlhbGl6YXRpb24gZXJyb3I6ICcgKyAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcicpKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0QnJvd3NlcigpOiBQcm9taXNlPEJyb3dzZXI+IHtcbiAgaWYgKCFicm93c2VySW5zdGFuY2UgfHwgIWJyb3dzZXJJbnN0YW5jZS5pc0Nvbm5lY3RlZCgpKSB7XG4gICAgYnJvd3Nlckluc3RhbmNlID0gYXdhaXQgaW5pdEJyb3dzZXIoKTtcbiAgfVxuICByZXR1cm4gYnJvd3Nlckluc3RhbmNlO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlUGFnZSgpOiBQcm9taXNlPFBhZ2U+IHtcbiAgY29uc3QgYnJvd3NlciA9IGF3YWl0IGdldEJyb3dzZXIoKTtcbiAgY29uc3QgcGFnZSA9IGF3YWl0IGJyb3dzZXIubmV3UGFnZSgpO1xuICBcbiAgLy8gU2V0IHZpZXdwb3J0IGFuZCB1c2VyIGFnZW50XG4gIGNvbnN0IGNvbmZpZyA9IGdldFJhbmRvbUJyb3dzZXJDb25maWcoKTtcbiAgYXdhaXQgcGFnZS5zZXRWaWV3cG9ydChjb25maWcudmlld3BvcnQpO1xuICBhd2FpdCBwYWdlLnNldFVzZXJBZ2VudChjb25maWcudXNlckFnZW50KTtcblxuICAvLyBTZXQgdXAgZXJyb3IgaGFuZGxpbmcgZm9yIHRoZSBwYWdlXG4gIHBhZ2Uub24oJ2Vycm9yJywgZXJyID0+IHtcbiAgICBkZWJ1Z0xvZygnUGFnZSBlcnJvcjogJyArIGVyci5tZXNzYWdlKTtcbiAgfSk7XG5cbiAgcGFnZS5vbigncGFnZWVycm9yJywgZXJyID0+IHtcbiAgICBkZWJ1Z0xvZygnUGFnZSBlcnJvcjogJyArIChlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogU3RyaW5nKGVycikpKTtcbiAgfSk7XG5cbiAgcmV0dXJuIHBhZ2U7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBuZWVkc1ZlcmlmaWNhdGlvbihwYWdlOiBQYWdlKTogUHJvbWlzZTxib29sZWFuPiB7XG4gIHRyeSB7XG4gICAgY29uc3QgdmVyaWZpY2F0aW9uRWxlbWVudCA9IGF3YWl0IHBhZ2UuJCgnI3B4LWNhcHRjaGEnKTtcbiAgICByZXR1cm4gISF2ZXJpZmljYXRpb25FbGVtZW50O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGRlYnVnTG9nKCdFcnJvciBjaGVja2luZyB2ZXJpZmljYXRpb246ICcgKyAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcicpKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZVByZXNzQW5kSG9sZFZlcmlmaWNhdGlvbihwYWdlOiBQYWdlLCBtYXhSZXRyaWVzID0gMik6IFByb21pc2U8Ym9vbGVhbj4ge1xuICBsZXQgcmV0cmllcyA9IDA7XG4gIHdoaWxlIChyZXRyaWVzIDwgbWF4UmV0cmllcykge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB2ZXJpZmljYXRpb25CdXR0b24gPSBhd2FpdCBwYWdlLiQoJyNweC1jYXB0Y2hhJyk7XG4gICAgICBpZiAoIXZlcmlmaWNhdGlvbkJ1dHRvbikge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGJvdW5kaW5nQm94ID0gYXdhaXQgdmVyaWZpY2F0aW9uQnV0dG9uLmJvdW5kaW5nQm94KCk7XG4gICAgICBpZiAoIWJvdW5kaW5nQm94KSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgeCA9IGJvdW5kaW5nQm94LnggKyBib3VuZGluZ0JveC53aWR0aCAvIDI7XG4gICAgICBjb25zdCB5ID0gYm91bmRpbmdCb3gueSArIGJvdW5kaW5nQm94LmhlaWdodCAvIDI7XG5cbiAgICAgIC8vIFJhbmRvbSBtb3VzZSBtb3ZlbWVudCBiZWZvcmUgY2xpY2tpbmdcbiAgICAgIGNvbnN0IHJhbmRvbU1vdmUgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IG9mZnNldFggPSBNYXRoLnJhbmRvbSgpICogMTAwIC0gNTA7XG4gICAgICAgIGNvbnN0IG9mZnNldFkgPSBNYXRoLnJhbmRvbSgpICogMTAwIC0gNTA7XG4gICAgICAgIHJldHVybiBwYWdlLm1vdXNlLm1vdmUoeCArIG9mZnNldFgsIHkgKyBvZmZzZXRZKTtcbiAgICAgIH07XG5cbiAgICAgIGF3YWl0IHJhbmRvbU1vdmUoKTtcbiAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHIgPT4gc2V0VGltZW91dChyLCBNYXRoLnJhbmRvbSgpICogNTAwICsgMjAwKSk7XG4gICAgICBhd2FpdCByYW5kb21Nb3ZlKCk7XG4gICAgICBhd2FpdCBuZXcgUHJvbWlzZShyID0+IHNldFRpbWVvdXQociwgTWF0aC5yYW5kb20oKSAqIDUwMCArIDIwMCkpO1xuICAgICAgXG4gICAgICBhd2FpdCBwYWdlLm1vdXNlLm1vdmUoeCwgeSk7XG4gICAgICBhd2FpdCBwYWdlLm1vdXNlLmRvd24oKTtcbiAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAzMDAwKSk7XG4gICAgICBhd2FpdCBwYWdlLm1vdXNlLnVwKCk7XG5cbiAgICAgIC8vIFdhaXQgZm9yIHZlcmlmaWNhdGlvbiB0byBjb21wbGV0ZVxuICAgICAgYXdhaXQgcGFnZS53YWl0Rm9yRnVuY3Rpb24oXG4gICAgICAgICgpID0+ICFkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcHgtY2FwdGNoYScpLFxuICAgICAgICB7IHRpbWVvdXQ6IDEwMDAwIH1cbiAgICAgICk7XG5cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBkZWJ1Z0xvZygnRXJyb3IgaGFuZGxpbmcgdmVyaWZpY2F0aW9uOiAnICsgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InKSk7XG4gICAgICByZXRyaWVzKys7XG4gICAgICBpZiAocmV0cmllcyA9PT0gbWF4UmV0cmllcykge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICBhd2FpdCBuZXcgUHJvbWlzZShyID0+IHNldFRpbWVvdXQociwgMTAwMCkpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gZmFsc2U7XG59Il0sIm5hbWVzIjpbInB1cHBldGVlciIsImRlYnVnTG9nIiwiZXhlYyIsImJyb3dzZXJJbnN0YW5jZSIsImNvbm5lY3Rpb25SZXRyaWVzIiwiTUFYX1JFVFJJRVMiLCJXU19FTkRQT0lOVF9SRVRSSUVTIiwiZ2V0UmFuZG9tQnJvd3NlckNvbmZpZyIsInNjcmVlbldpZHRoIiwic2NyZWVuSGVpZ2h0Iiwib3NWZXJzaW9uIiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwiY2hyb21lVmVyc2lvbiIsInVzZXJBZ2VudCIsInZpZXdwb3J0Iiwid2lkdGgiLCJoZWlnaHQiLCJhcmdzIiwiaW5pdEJyb3dzZXIiLCJjbG9zZSIsImUiLCJFcnJvciIsIm1lc3NhZ2UiLCJwcm9jZXNzIiwicGxhdGZvcm0iLCJQcm9taXNlIiwicmVzb2x2ZSIsInIiLCJzZXRUaW1lb3V0IiwiY29uZmlnIiwid3NFbmRwb2ludFJldHJpZXMiLCJicm93c2VyIiwiZXhlY3V0YWJsZVBhdGgiLCJ1bmRlZmluZWQiLCJsYXVuY2giLCJoZWFkbGVzcyIsImRlZmF1bHRWaWV3cG9ydCIsImVudiIsIkRJU1BMQVkiLCJwYWdlcyIsImxlbmd0aCIsInRlc3RQYWdlIiwibmV3UGFnZSIsInNldFVzZXJBZ2VudCIsImV2YWx1YXRlIiwibmF2aWdhdG9yIiwicmVjb25uZWN0VGltZW91dCIsIm9uIiwiY2F0Y2giLCJhbGwiLCJtYXAiLCJwYWdlIiwiY2xlYXJUaW1lb3V0IiwiY2xvc2VFcnJvciIsImRlbGF5IiwibWluIiwicG93IiwiZXJyb3IiLCJnZXRCcm93c2VyIiwiaXNDb25uZWN0ZWQiLCJjcmVhdGVQYWdlIiwic2V0Vmlld3BvcnQiLCJlcnIiLCJTdHJpbmciLCJuZWVkc1ZlcmlmaWNhdGlvbiIsInZlcmlmaWNhdGlvbkVsZW1lbnQiLCIkIiwiaGFuZGxlUHJlc3NBbmRIb2xkVmVyaWZpY2F0aW9uIiwibWF4UmV0cmllcyIsInJldHJpZXMiLCJ2ZXJpZmljYXRpb25CdXR0b24iLCJib3VuZGluZ0JveCIsIngiLCJ5IiwicmFuZG9tTW92ZSIsIm9mZnNldFgiLCJvZmZzZXRZIiwibW91c2UiLCJtb3ZlIiwiZG93biIsInVwIiwid2FpdEZvckZ1bmN0aW9uIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwidGltZW91dCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/lib/browser-utils.ts\n");

/***/ }),

/***/ "(rsc)/./app/lib/db.ts":
/*!***********************!*\
  !*** ./app/lib/db.ts ***!
  \***********************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var sqlite3__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! sqlite3 */ \"sqlite3\");\n/* harmony import */ var sqlite3__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(sqlite3__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var sqlite__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! sqlite */ \"(rsc)/./node_modules/sqlite/build/index.mjs\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _server_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./server-utils */ \"(rsc)/./app/lib/server-utils.ts\");\n\n\n\n\nclass Database {\n    async initDb() {\n        try {\n            const dbPath = path__WEBPACK_IMPORTED_MODULE_2___default().join(process.cwd(), \"alaska_waitlist.db\");\n            this.db = await (0,sqlite__WEBPACK_IMPORTED_MODULE_1__.open)({\n                filename: dbPath,\n                driver: (sqlite3__WEBPACK_IMPORTED_MODULE_0___default().Database)\n            });\n            await this.createTables();\n            this.isDbAvailable = true;\n            (0,_server_utils__WEBPACK_IMPORTED_MODULE_3__.debugLog)(\"Database initialized successfully at: \" + dbPath);\n        } catch (error) {\n            (0,_server_utils__WEBPACK_IMPORTED_MODULE_3__.debugLog)(\"Database connection failed: \" + (error instanceof Error ? error.message : \"Unknown error\"));\n            this.isDbAvailable = false;\n        }\n    }\n    async createTables() {\n        if (!this.db) return;\n        await this.db.exec(`\n      CREATE TABLE IF NOT EXISTS flights (\n        id INTEGER PRIMARY KEY AUTOINCREMENT,\n        flight_number TEXT NOT NULL,\n        flight_date TEXT NOT NULL,\n        origin TEXT NOT NULL,\n        destination TEXT NOT NULL,\n        departure_time TEXT,\n        arrival_time TEXT,\n        segment_index INTEGER NOT NULL,\n        created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n        UNIQUE(flight_number, flight_date, segment_index)\n      );\n\n      CREATE TABLE IF NOT EXISTS waitlist_snapshots (\n        id INTEGER PRIMARY KEY AUTOINCREMENT,\n        flight_id INTEGER REFERENCES flights(id),\n        waitlist_names TEXT,\n        first_class_capacity INTEGER,\n        first_class_available INTEGER,\n        first_class_checked_in INTEGER,\n        snapshot_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n      );\n    `);\n    }\n    async saveFlightSegment(segment, segmentIndex) {\n        if (!this.isDbAvailable || !this.db) return null;\n        try {\n            const result = await this.db.run(`\n        INSERT OR REPLACE INTO flights \n        (flight_number, flight_date, origin, destination, departure_time, arrival_time, segment_index)\n        VALUES (?, ?, ?, ?, ?, ?, ?)`, [\n                segment.flightNumber,\n                segment.date,\n                segment.origin,\n                segment.destination,\n                segment.departureTime,\n                segment.arrivalTime,\n                segmentIndex\n            ]);\n            return result.lastID || null;\n        } catch (error) {\n            (0,_server_utils__WEBPACK_IMPORTED_MODULE_3__.debugLog)(\"Error saving flight segment: \" + (error instanceof Error ? error.message : \"Unknown error\"));\n            return null;\n        }\n    }\n    async saveWaitlistSnapshot(flightId, waitlistInfo) {\n        if (!this.isDbAvailable || !this.db || !flightId) return;\n        try {\n            await this.db.run(`\n        INSERT INTO waitlist_snapshots \n        (flight_id, waitlist_names, first_class_capacity, first_class_available, first_class_checked_in)\n        VALUES (?, ?, ?, ?, ?)`, [\n                flightId,\n                JSON.stringify(waitlistInfo.names),\n                waitlistInfo.capacity,\n                waitlistInfo.available,\n                waitlistInfo.checkedIn\n            ]);\n        } catch (error) {\n            (0,_server_utils__WEBPACK_IMPORTED_MODULE_3__.debugLog)(\"Error saving waitlist snapshot: \" + (error instanceof Error ? error.message : \"Unknown error\"));\n        }\n    }\n    async getLatestWaitlistData(flightNumber, flightDate) {\n        if (!this.isDbAvailable || !this.db) return null;\n        try {\n            return await this.db.all(`\n        WITH LatestSnapshots AS (\n          SELECT \n            w.*,\n            f.flight_number,\n            f.flight_date,\n            f.origin,\n            f.destination,\n            f.departure_time,\n            f.arrival_time,\n            f.segment_index,\n            ROW_NUMBER() OVER (\n              PARTITION BY f.id \n              ORDER BY w.snapshot_time DESC\n            ) as rn\n          FROM flights f\n          LEFT JOIN waitlist_snapshots w ON f.id = w.flight_id\n          WHERE f.flight_number = ? AND f.flight_date = ?\n        )\n        SELECT * FROM LatestSnapshots \n        WHERE rn = 1\n        ORDER BY segment_index\n      `, [\n                flightNumber,\n                flightDate\n            ]);\n        } catch (error) {\n            (0,_server_utils__WEBPACK_IMPORTED_MODULE_3__.debugLog)(\"Error getting latest waitlist data: \" + (error instanceof Error ? error.message : \"Unknown error\"));\n            return null;\n        }\n    }\n    async getAllData() {\n        if (!this.isDbAvailable || !this.db) return null;\n        try {\n            const flights = await this.db.all(`\n        SELECT * FROM flights \n        ORDER BY flight_date DESC, flight_number, segment_index\n      `);\n            const snapshots = await this.db.all(`\n        SELECT \n          w.*,\n          f.flight_number,\n          f.flight_date,\n          f.segment_index\n        FROM waitlist_snapshots w\n        JOIN flights f ON w.flight_id = f.id\n        ORDER BY w.snapshot_time DESC\n      `);\n            return {\n                flights,\n                snapshots\n            };\n        } catch (error) {\n            (0,_server_utils__WEBPACK_IMPORTED_MODULE_3__.debugLog)(\"Error getting all data: \" + (error instanceof Error ? error.message : \"Unknown error\"));\n            return null;\n        }\n    }\n    constructor(){\n        this.db = null;\n        this.isDbAvailable = false;\n    }\n}\nconst db = new Database();\nawait db.initDb();\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (db);\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } }, 1);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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WUFDMUcsT0FBTztRQUNUO0lBQ0Y7SUFFQSxNQUFNMEIsYUFBbUU7UUFDdkUsSUFBSSxDQUFDLElBQUksQ0FBQzdCLGFBQWEsSUFBSSxDQUFDLElBQUksQ0FBQ0osRUFBRSxFQUFFLE9BQU87UUFFNUMsSUFBSTtZQUNGLE1BQU1rQyxVQUFVLE1BQU0sSUFBSSxDQUFDbEMsRUFBRSxDQUFDZ0MsR0FBRyxDQUFDLENBQUM7OztNQUduQyxDQUFDO1lBRUQsTUFBTUcsWUFBWSxNQUFNLElBQUksQ0FBQ25DLEVBQUUsQ0FBQ2dDLEdBQUcsQ0FBQyxDQUFDOzs7Ozs7Ozs7TUFTckMsQ0FBQztZQUVELE9BQU87Z0JBQUVFO2dCQUFTQztZQUFVO1FBQzlCLEVBQUUsT0FBTzlCLE9BQU87WUFDZFosdURBQVFBLENBQUMsNkJBQThCWSxDQUFBQSxpQkFBaUJDLFFBQVFELE1BQU1FLE9BQU8sR0FBRyxlQUFjO1lBQzlGLE9BQU87UUFDVDtJQUNGOzthQXpKUVAsS0FBaUU7YUFDbEVJLGdCQUFnQjs7QUF5SnpCO0FBRUEsTUFBTUosS0FBSyxJQUFJTjtBQUNmLE1BQU1NLEdBQUdMLE1BQU07QUFFZixpRUFBZUssRUFBRUEsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2FsYXNrYS13YWl0bGlzdC1hcGkvLi9hcHAvbGliL2RiLnRzPzU4ZmQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHNxbGl0ZTMgZnJvbSAnc3FsaXRlMyc7XG5pbXBvcnQgeyBEYXRhYmFzZSBhcyBTUUxpdGVEYXRhYmFzZSwgb3BlbiB9IGZyb20gJ3NxbGl0ZSc7XG5pbXBvcnQgcGF0aCBmcm9tICdwYXRoJztcbmltcG9ydCB7IGRlYnVnTG9nIH0gZnJvbSAnLi9zZXJ2ZXItdXRpbHMnO1xuXG5leHBvcnQgaW50ZXJmYWNlIEZsaWdodFNlZ21lbnQge1xuICBmbGlnaHROdW1iZXI6IHN0cmluZztcbiAgZGF0ZTogc3RyaW5nO1xuICBvcmlnaW46IHN0cmluZztcbiAgZGVzdGluYXRpb246IHN0cmluZztcbiAgZGVwYXJ0dXJlVGltZTogc3RyaW5nO1xuICBhcnJpdmFsVGltZTogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFdhaXRsaXN0U25hcHNob3Qge1xuICBuYW1lczogc3RyaW5nW107XG4gIGNhcGFjaXR5OiBudW1iZXIgfCBudWxsO1xuICBhdmFpbGFibGU6IG51bWJlciB8IG51bGw7XG4gIGNoZWNrZWRJbjogbnVtYmVyIHwgbnVsbDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBEYXRhYmFzZVJlY29yZCB7XG4gIGZsaWdodF9udW1iZXI6IHN0cmluZztcbiAgZmxpZ2h0X2RhdGU6IHN0cmluZztcbiAgb3JpZ2luOiBzdHJpbmc7XG4gIGRlc3RpbmF0aW9uOiBzdHJpbmc7XG4gIGRlcGFydHVyZV90aW1lOiBzdHJpbmc7XG4gIGFycml2YWxfdGltZTogc3RyaW5nO1xuICBzZWdtZW50X2luZGV4OiBudW1iZXI7XG4gIHdhaXRsaXN0X25hbWVzOiBzdHJpbmc7XG4gIGZpcnN0X2NsYXNzX2NhcGFjaXR5OiBudW1iZXIgfCBudWxsO1xuICBmaXJzdF9jbGFzc19hdmFpbGFibGU6IG51bWJlciB8IG51bGw7XG4gIGZpcnN0X2NsYXNzX2NoZWNrZWRfaW46IG51bWJlciB8IG51bGw7XG4gIHNuYXBzaG90X3RpbWU6IHN0cmluZztcbn1cblxuY2xhc3MgRGF0YWJhc2Uge1xuICBwcml2YXRlIGRiOiBTUUxpdGVEYXRhYmFzZTxzcWxpdGUzLkRhdGFiYXNlLCBzcWxpdGUzLlN0YXRlbWVudD4gfCBudWxsID0gbnVsbDtcbiAgcHVibGljIGlzRGJBdmFpbGFibGUgPSBmYWxzZTtcblxuICBhc3luYyBpbml0RGIoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGRiUGF0aCA9IHBhdGguam9pbihwcm9jZXNzLmN3ZCgpLCAnYWxhc2thX3dhaXRsaXN0LmRiJyk7XG4gICAgICB0aGlzLmRiID0gYXdhaXQgb3Blbih7XG4gICAgICAgIGZpbGVuYW1lOiBkYlBhdGgsXG4gICAgICAgIGRyaXZlcjogc3FsaXRlMy5EYXRhYmFzZVxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIGF3YWl0IHRoaXMuY3JlYXRlVGFibGVzKCk7XG4gICAgICB0aGlzLmlzRGJBdmFpbGFibGUgPSB0cnVlO1xuICAgICAgZGVidWdMb2coJ0RhdGFiYXNlIGluaXRpYWxpemVkIHN1Y2Nlc3NmdWxseSBhdDogJyArIGRiUGF0aCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGRlYnVnTG9nKCdEYXRhYmFzZSBjb25uZWN0aW9uIGZhaWxlZDogJyArIChlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJykpO1xuICAgICAgdGhpcy5pc0RiQXZhaWxhYmxlID0gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBjcmVhdGVUYWJsZXMoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgaWYgKCF0aGlzLmRiKSByZXR1cm47XG4gICAgXG4gICAgYXdhaXQgdGhpcy5kYi5leGVjKGBcbiAgICAgIENSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIGZsaWdodHMgKFxuICAgICAgICBpZCBJTlRFR0VSIFBSSU1BUlkgS0VZIEFVVE9JTkNSRU1FTlQsXG4gICAgICAgIGZsaWdodF9udW1iZXIgVEVYVCBOT1QgTlVMTCxcbiAgICAgICAgZmxpZ2h0X2RhdGUgVEVYVCBOT1QgTlVMTCxcbiAgICAgICAgb3JpZ2luIFRFWFQgTk9UIE5VTEwsXG4gICAgICAgIGRlc3RpbmF0aW9uIFRFWFQgTk9UIE5VTEwsXG4gICAgICAgIGRlcGFydHVyZV90aW1lIFRFWFQsXG4gICAgICAgIGFycml2YWxfdGltZSBURVhULFxuICAgICAgICBzZWdtZW50X2luZGV4IElOVEVHRVIgTk9UIE5VTEwsXG4gICAgICAgIGNyZWF0ZWRfYXQgVElNRVNUQU1QIERFRkFVTFQgQ1VSUkVOVF9USU1FU1RBTVAsXG4gICAgICAgIFVOSVFVRShmbGlnaHRfbnVtYmVyLCBmbGlnaHRfZGF0ZSwgc2VnbWVudF9pbmRleClcbiAgICAgICk7XG5cbiAgICAgIENSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIHdhaXRsaXN0X3NuYXBzaG90cyAoXG4gICAgICAgIGlkIElOVEVHRVIgUFJJTUFSWSBLRVkgQVVUT0lOQ1JFTUVOVCxcbiAgICAgICAgZmxpZ2h0X2lkIElOVEVHRVIgUkVGRVJFTkNFUyBmbGlnaHRzKGlkKSxcbiAgICAgICAgd2FpdGxpc3RfbmFtZXMgVEVYVCxcbiAgICAgICAgZmlyc3RfY2xhc3NfY2FwYWNpdHkgSU5URUdFUixcbiAgICAgICAgZmlyc3RfY2xhc3NfYXZhaWxhYmxlIElOVEVHRVIsXG4gICAgICAgIGZpcnN0X2NsYXNzX2NoZWNrZWRfaW4gSU5URUdFUixcbiAgICAgICAgc25hcHNob3RfdGltZSBUSU1FU1RBTVAgREVGQVVMVCBDVVJSRU5UX1RJTUVTVEFNUFxuICAgICAgKTtcbiAgICBgKTtcbiAgfVxuXG4gIGFzeW5jIHNhdmVGbGlnaHRTZWdtZW50KHNlZ21lbnQ6IEZsaWdodFNlZ21lbnQsIHNlZ21lbnRJbmRleDogbnVtYmVyKTogUHJvbWlzZTxudW1iZXIgfCBudWxsPiB7XG4gICAgaWYgKCF0aGlzLmlzRGJBdmFpbGFibGUgfHwgIXRoaXMuZGIpIHJldHVybiBudWxsO1xuICAgIFxuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLmRiLnJ1bihgXG4gICAgICAgIElOU0VSVCBPUiBSRVBMQUNFIElOVE8gZmxpZ2h0cyBcbiAgICAgICAgKGZsaWdodF9udW1iZXIsIGZsaWdodF9kYXRlLCBvcmlnaW4sIGRlc3RpbmF0aW9uLCBkZXBhcnR1cmVfdGltZSwgYXJyaXZhbF90aW1lLCBzZWdtZW50X2luZGV4KVxuICAgICAgICBWQUxVRVMgKD8sID8sID8sID8sID8sID8sID8pYCxcbiAgICAgICAgW1xuICAgICAgICAgIHNlZ21lbnQuZmxpZ2h0TnVtYmVyLFxuICAgICAgICAgIHNlZ21lbnQuZGF0ZSxcbiAgICAgICAgICBzZWdtZW50Lm9yaWdpbixcbiAgICAgICAgICBzZWdtZW50LmRlc3RpbmF0aW9uLFxuICAgICAgICAgIHNlZ21lbnQuZGVwYXJ0dXJlVGltZSxcbiAgICAgICAgICBzZWdtZW50LmFycml2YWxUaW1lLFxuICAgICAgICAgIHNlZ21lbnRJbmRleFxuICAgICAgICBdXG4gICAgICApO1xuICAgICAgcmV0dXJuIHJlc3VsdC5sYXN0SUQgfHwgbnVsbDtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgZGVidWdMb2coJ0Vycm9yIHNhdmluZyBmbGlnaHQgc2VnbWVudDogJyArIChlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJykpO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgc2F2ZVdhaXRsaXN0U25hcHNob3QoZmxpZ2h0SWQ6IG51bWJlciwgd2FpdGxpc3RJbmZvOiBXYWl0bGlzdFNuYXBzaG90KTogUHJvbWlzZTx2b2lkPiB7XG4gICAgaWYgKCF0aGlzLmlzRGJBdmFpbGFibGUgfHwgIXRoaXMuZGIgfHwgIWZsaWdodElkKSByZXR1cm47XG4gICAgXG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IHRoaXMuZGIucnVuKGBcbiAgICAgICAgSU5TRVJUIElOVE8gd2FpdGxpc3Rfc25hcHNob3RzIFxuICAgICAgICAoZmxpZ2h0X2lkLCB3YWl0bGlzdF9uYW1lcywgZmlyc3RfY2xhc3NfY2FwYWNpdHksIGZpcnN0X2NsYXNzX2F2YWlsYWJsZSwgZmlyc3RfY2xhc3NfY2hlY2tlZF9pbilcbiAgICAgICAgVkFMVUVTICg/LCA/LCA/LCA/LCA/KWAsXG4gICAgICAgIFtcbiAgICAgICAgICBmbGlnaHRJZCxcbiAgICAgICAgICBKU09OLnN0cmluZ2lmeSh3YWl0bGlzdEluZm8ubmFtZXMpLFxuICAgICAgICAgIHdhaXRsaXN0SW5mby5jYXBhY2l0eSxcbiAgICAgICAgICB3YWl0bGlzdEluZm8uYXZhaWxhYmxlLFxuICAgICAgICAgIHdhaXRsaXN0SW5mby5jaGVja2VkSW5cbiAgICAgICAgXVxuICAgICAgKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgZGVidWdMb2coJ0Vycm9yIHNhdmluZyB3YWl0bGlzdCBzbmFwc2hvdDogJyArIChlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJykpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGdldExhdGVzdFdhaXRsaXN0RGF0YShmbGlnaHROdW1iZXI6IHN0cmluZywgZmxpZ2h0RGF0ZTogc3RyaW5nKTogUHJvbWlzZTxEYXRhYmFzZVJlY29yZFtdIHwgbnVsbD4ge1xuICAgIGlmICghdGhpcy5pc0RiQXZhaWxhYmxlIHx8ICF0aGlzLmRiKSByZXR1cm4gbnVsbDtcbiAgICBcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZGIuYWxsPERhdGFiYXNlUmVjb3JkW10+KGBcbiAgICAgICAgV0lUSCBMYXRlc3RTbmFwc2hvdHMgQVMgKFxuICAgICAgICAgIFNFTEVDVCBcbiAgICAgICAgICAgIHcuKixcbiAgICAgICAgICAgIGYuZmxpZ2h0X251bWJlcixcbiAgICAgICAgICAgIGYuZmxpZ2h0X2RhdGUsXG4gICAgICAgICAgICBmLm9yaWdpbixcbiAgICAgICAgICAgIGYuZGVzdGluYXRpb24sXG4gICAgICAgICAgICBmLmRlcGFydHVyZV90aW1lLFxuICAgICAgICAgICAgZi5hcnJpdmFsX3RpbWUsXG4gICAgICAgICAgICBmLnNlZ21lbnRfaW5kZXgsXG4gICAgICAgICAgICBST1dfTlVNQkVSKCkgT1ZFUiAoXG4gICAgICAgICAgICAgIFBBUlRJVElPTiBCWSBmLmlkIFxuICAgICAgICAgICAgICBPUkRFUiBCWSB3LnNuYXBzaG90X3RpbWUgREVTQ1xuICAgICAgICAgICAgKSBhcyByblxuICAgICAgICAgIEZST00gZmxpZ2h0cyBmXG4gICAgICAgICAgTEVGVCBKT0lOIHdhaXRsaXN0X3NuYXBzaG90cyB3IE9OIGYuaWQgPSB3LmZsaWdodF9pZFxuICAgICAgICAgIFdIRVJFIGYuZmxpZ2h0X251bWJlciA9ID8gQU5EIGYuZmxpZ2h0X2RhdGUgPSA/XG4gICAgICAgIClcbiAgICAgICAgU0VMRUNUICogRlJPTSBMYXRlc3RTbmFwc2hvdHMgXG4gICAgICAgIFdIRVJFIHJuID0gMVxuICAgICAgICBPUkRFUiBCWSBzZWdtZW50X2luZGV4XG4gICAgICBgLCBbZmxpZ2h0TnVtYmVyLCBmbGlnaHREYXRlXSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGRlYnVnTG9nKCdFcnJvciBnZXR0aW5nIGxhdGVzdCB3YWl0bGlzdCBkYXRhOiAnICsgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InKSk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH1cblxuICBhc3luYyBnZXRBbGxEYXRhKCk6IFByb21pc2U8eyBmbGlnaHRzOiBhbnlbXTsgc25hcHNob3RzOiBhbnlbXSB9IHwgbnVsbD4ge1xuICAgIGlmICghdGhpcy5pc0RiQXZhaWxhYmxlIHx8ICF0aGlzLmRiKSByZXR1cm4gbnVsbDtcbiAgICBcbiAgICB0cnkge1xuICAgICAgY29uc3QgZmxpZ2h0cyA9IGF3YWl0IHRoaXMuZGIuYWxsKGBcbiAgICAgICAgU0VMRUNUICogRlJPTSBmbGlnaHRzIFxuICAgICAgICBPUkRFUiBCWSBmbGlnaHRfZGF0ZSBERVNDLCBmbGlnaHRfbnVtYmVyLCBzZWdtZW50X2luZGV4XG4gICAgICBgKTtcbiAgICAgIFxuICAgICAgY29uc3Qgc25hcHNob3RzID0gYXdhaXQgdGhpcy5kYi5hbGwoYFxuICAgICAgICBTRUxFQ1QgXG4gICAgICAgICAgdy4qLFxuICAgICAgICAgIGYuZmxpZ2h0X251bWJlcixcbiAgICAgICAgICBmLmZsaWdodF9kYXRlLFxuICAgICAgICAgIGYuc2VnbWVudF9pbmRleFxuICAgICAgICBGUk9NIHdhaXRsaXN0X3NuYXBzaG90cyB3XG4gICAgICAgIEpPSU4gZmxpZ2h0cyBmIE9OIHcuZmxpZ2h0X2lkID0gZi5pZFxuICAgICAgICBPUkRFUiBCWSB3LnNuYXBzaG90X3RpbWUgREVTQ1xuICAgICAgYCk7XG4gICAgICBcbiAgICAgIHJldHVybiB7IGZsaWdodHMsIHNuYXBzaG90cyB9O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBkZWJ1Z0xvZygnRXJyb3IgZ2V0dGluZyBhbGwgZGF0YTogJyArIChlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJykpO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG59XG5cbmNvbnN0IGRiID0gbmV3IERhdGFiYXNlKCk7XG5hd2FpdCBkYi5pbml0RGIoKTtcblxuZXhwb3J0IGRlZmF1bHQgZGI7ICJdLCJuYW1lcyI6WyJzcWxpdGUzIiwib3BlbiIsInBhdGgiLCJkZWJ1Z0xvZyIsIkRhdGFiYXNlIiwiaW5pdERiIiwiZGJQYXRoIiwiam9pbiIsInByb2Nlc3MiLCJjd2QiLCJkYiIsImZpbGVuYW1lIiwiZHJpdmVyIiwiY3JlYXRlVGFibGVzIiwiaXNEYkF2YWlsYWJsZSIsImVycm9yIiwiRXJyb3IiLCJtZXNzYWdlIiwiZXhlYyIsInNhdmVGbGlnaHRTZWdtZW50Iiwic2VnbWVudCIsInNlZ21lbnRJbmRleCIsInJlc3VsdCIsInJ1biIsImZsaWdodE51bWJlciIsImRhdGUiLCJvcmlnaW4iLCJkZXN0aW5hdGlvbiIsImRlcGFydHVyZVRpbWUiLCJhcnJpdmFsVGltZSIsImxhc3RJRCIsInNhdmVXYWl0bGlzdFNuYXBzaG90IiwiZmxpZ2h0SWQiLCJ3YWl0bGlzdEluZm8iLCJKU09OIiwic3RyaW5naWZ5IiwibmFtZXMiLCJjYXBhY2l0eSIsImF2YWlsYWJsZSIsImNoZWNrZWRJbiIsImdldExhdGVzdFdhaXRsaXN0RGF0YSIsImZsaWdodERhdGUiLCJhbGwiLCJnZXRBbGxEYXRhIiwiZmxpZ2h0cyIsInNuYXBzaG90cyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/lib/db.ts\n");

/***/ }),

/***/ "(rsc)/./app/lib/flight-utils.ts":
/*!*********************************!*\
  !*** ./app/lib/flight-utils.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   formatDate: () => (/* binding */ formatDate),\n/* harmony export */   isValidDate: () => (/* binding */ isValidDate),\n/* harmony export */   isValidFlightNumber: () => (/* binding */ isValidFlightNumber),\n/* harmony export */   parseFlightNumber: () => (/* binding */ parseFlightNumber),\n/* harmony export */   parseFlightSegments: () => (/* binding */ parseFlightSegments),\n/* harmony export */   parseWaitlistForSegment: () => (/* binding */ parseWaitlistForSegment),\n/* harmony export */   validateFlightInput: () => (/* binding */ validateFlightInput)\n/* harmony export */ });\n/* harmony import */ var _server_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./server-utils */ \"(rsc)/./app/lib/server-utils.ts\");\n\nfunction parseFlightSegments($) {\n    (0,_server_utils__WEBPACK_IMPORTED_MODULE_0__.debugLog)(\"\\n=== Parsing Flight Segments ===\");\n    const segments = [];\n    const mainRows = $(\".main-row-status\");\n    (0,_server_utils__WEBPACK_IMPORTED_MODULE_0__.debugLog)(`Found ${mainRows.length} main-row-status elements`);\n    mainRows.each((i, container)=>{\n        const $container = $(container);\n        const $flight = $container.find(\"auro-flight\");\n        if ($flight.length) {\n            (0,_server_utils__WEBPACK_IMPORTED_MODULE_0__.debugLog)(`\\nAnalyzing flight element ${i + 1}:`);\n            // Get flight details from attributes\n            const flightNumber = $flight.attr(\"flights\")?.replace(\"AS \", \"\") || \"\";\n            const origin = $flight.attr(\"departurestation\") || \"Unknown\";\n            const destination = $flight.attr(\"arrivalstation\") || \"Unknown\";\n            const departureTime = $flight.attr(\"departuretime\")?.split(\" \")[1] || \"Unknown\";\n            const arrivalTime = $flight.attr(\"arrivaltime\")?.split(\" \")[1] || \"Unknown\";\n            // Get the date from the timestamp element\n            const date = $(\".timestamp\").first().text().trim();\n            (0,_server_utils__WEBPACK_IMPORTED_MODULE_0__.debugLog)(\"Parsed flight details: \" + JSON.stringify({\n                flightNumber,\n                origin,\n                destination,\n                departureTime,\n                arrivalTime,\n                date\n            }));\n            if (flightNumber && date) {\n                const segment = {\n                    flightNumber,\n                    date,\n                    origin,\n                    destination,\n                    departureTime,\n                    arrivalTime\n                };\n                (0,_server_utils__WEBPACK_IMPORTED_MODULE_0__.debugLog)(`Created segment:\n          Flight: AS${segment.flightNumber}\n          Date: ${segment.date}\n          Route: ${segment.origin} → ${segment.destination}\n          Departure: ${segment.departureTime}\n          Arrival: ${segment.arrivalTime}`);\n                segments.push(segment);\n            } else {\n                (0,_server_utils__WEBPACK_IMPORTED_MODULE_0__.debugLog)(\"Skipping segment due to missing data: \" + JSON.stringify({\n                    flightNumber,\n                    date,\n                    origin,\n                    destination\n                }));\n            }\n        }\n    });\n    (0,_server_utils__WEBPACK_IMPORTED_MODULE_0__.debugLog)(`\\nTotal segments found: ${segments.length}`);\n    return segments;\n}\nfunction parseWaitlistForSegment($, segmentIndex) {\n    (0,_server_utils__WEBPACK_IMPORTED_MODULE_0__.debugLog)(`\\n=== Parsing Waitlist for Segment ${segmentIndex + 1} ===`);\n    // Get all accordions\n    const accordions = $(\".accordion-container-fs\");\n    (0,_server_utils__WEBPACK_IMPORTED_MODULE_0__.debugLog)(`Found ${accordions.length} accordion sections`);\n    const accordion = accordions.eq(segmentIndex);\n    if (!accordion.length) {\n        (0,_server_utils__WEBPACK_IMPORTED_MODULE_0__.debugLog)(\"❌ No accordion found for this segment\");\n        return null;\n    }\n    // First try to find the specific upgrade requests container\n    const upgradeContainers = accordion.find(\".waitlist-single-container\").filter((_, container)=>{\n        return $(container).find(\"h4\").text().trim() === \"Upgrade requests\";\n    });\n    (0,_server_utils__WEBPACK_IMPORTED_MODULE_0__.debugLog)(`Found ${upgradeContainers.length} specific upgrade containers`);\n    const waitlistInfo = {\n        capacity: null,\n        available: null,\n        checkedIn: null,\n        names: []\n    };\n    if (upgradeContainers.length) {\n        const container = upgradeContainers.first();\n        (0,_server_utils__WEBPACK_IMPORTED_MODULE_0__.debugLog)(\"\\nProcessing upgrade container...\");\n        // Parse capacity info\n        container.find(\".waitlist-text-container span\").each((_, span)=>{\n            const text = $(span).text().trim();\n            (0,_server_utils__WEBPACK_IMPORTED_MODULE_0__.debugLog)(`Analyzing capacity text: \"${text}\"`);\n            if (text.includes(\"capacity\")) {\n                waitlistInfo.capacity = parseInt(text.match(/\\d+/)?.[0] || \"0\");\n            } else if (text.includes(\"Available\")) {\n                waitlistInfo.available = parseInt(text.match(/\\d+/)?.[0] || \"0\");\n            } else if (text.includes(\"Checked-in\")) {\n                waitlistInfo.checkedIn = parseInt(text.match(/\\d+/)?.[0] || \"0\");\n            }\n        });\n        // Parse names from the table\n        const rows = container.find(\"table.auro_table tbody tr\");\n        (0,_server_utils__WEBPACK_IMPORTED_MODULE_0__.debugLog)(`Found ${rows.length} name rows in table`);\n        rows.each((_, row)=>{\n            const nameCell = $(row).find(\"td\").eq(1);\n            const name = nameCell.text().trim();\n            if (name && /^[A-Z]{2,3}\\/[A-Z]$/.test(name)) {\n                (0,_server_utils__WEBPACK_IMPORTED_MODULE_0__.debugLog)(`✓ Found valid name: ${name}`);\n                waitlistInfo.names.push(name);\n            }\n        });\n    }\n    (0,_server_utils__WEBPACK_IMPORTED_MODULE_0__.debugLog)(\"\\nFinal waitlist info: \" + JSON.stringify(waitlistInfo));\n    return waitlistInfo;\n}\nfunction parseFlightNumber(input) {\n    const match = input.match(/\\d+/);\n    return match ? match[0] : \"\";\n}\nfunction formatDate(date) {\n    return date.toISOString().split(\"T\")[0];\n}\nfunction isValidFlightNumber(flightNumber) {\n    return /^\\d{3,4}$/.test(flightNumber);\n}\nfunction isValidDate(date) {\n    const d = new Date(date);\n    return d instanceof Date && !isNaN(d.getTime());\n}\nfunction validateFlightInput(flightNumber, date) {\n    if (!flightNumber || !date) {\n        return \"Flight number and date are required\";\n    }\n    if (!isValidFlightNumber(flightNumber)) {\n        return \"Invalid flight number format\";\n    }\n    if (!isValidDate(date)) {\n        return \"Invalid date format\";\n    }\n    const inputDate = new Date(date);\n    const today = new Date();\n    const maxDate = new Date();\n    maxDate.setDate(today.getDate() + 330); // Alaska Airlines allows booking ~330 days in advance\n    if (inputDate < today) {\n        return \"Date cannot be in the past\";\n    }\n    if (inputDate > maxDate) {\n        return \"Date is too far in the future\";\n    }\n    return null;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFNTSxVQUFVLElBQUlOO0lBQ3BCTSxRQUFRQyxPQUFPLENBQUNGLE1BQU1HLE9BQU8sS0FBSyxNQUFNLHNEQUFzRDtJQUU5RixJQUFJSixZQUFZQyxPQUFPO1FBQ3JCLE9BQU87SUFDVDtJQUVBLElBQUlELFlBQVlFLFNBQVM7UUFDdkIsT0FBTztJQUNUO0lBRUEsT0FBTztBQUNUIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWxhc2thLXdhaXRsaXN0LWFwaS8uL2FwcC9saWIvZmxpZ2h0LXV0aWxzLnRzPzUwZDQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZGVidWdMb2cgfSBmcm9tICcuL3NlcnZlci11dGlscyc7XG5pbXBvcnQgeyBDaGVlcmlvQVBJIH0gZnJvbSAnY2hlZXJpbyc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgRmxpZ2h0U2VnbWVudCB7XG4gIGZsaWdodE51bWJlcjogc3RyaW5nO1xuICBkYXRlOiBzdHJpbmc7XG4gIG9yaWdpbjogc3RyaW5nO1xuICBkZXN0aW5hdGlvbjogc3RyaW5nO1xuICBkZXBhcnR1cmVUaW1lOiBzdHJpbmc7XG4gIGFycml2YWxUaW1lOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgV2FpdGxpc3RTbmFwc2hvdCB7XG4gIG5hbWVzOiBzdHJpbmdbXTtcbiAgY2FwYWNpdHk6IG51bWJlciB8IG51bGw7XG4gIGF2YWlsYWJsZTogbnVtYmVyIHwgbnVsbDtcbiAgY2hlY2tlZEluOiBudW1iZXIgfCBudWxsO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VGbGlnaHRTZWdtZW50cygkOiBDaGVlcmlvQVBJKTogRmxpZ2h0U2VnbWVudFtdIHtcbiAgZGVidWdMb2coJ1xcbj09PSBQYXJzaW5nIEZsaWdodCBTZWdtZW50cyA9PT0nKTtcbiAgY29uc3Qgc2VnbWVudHM6IEZsaWdodFNlZ21lbnRbXSA9IFtdO1xuICBcbiAgY29uc3QgbWFpblJvd3MgPSAkKCcubWFpbi1yb3ctc3RhdHVzJyk7XG4gIGRlYnVnTG9nKGBGb3VuZCAke21haW5Sb3dzLmxlbmd0aH0gbWFpbi1yb3ctc3RhdHVzIGVsZW1lbnRzYCk7XG4gIFxuICBtYWluUm93cy5lYWNoKChpLCBjb250YWluZXIpID0+IHtcbiAgICBjb25zdCAkY29udGFpbmVyID0gJChjb250YWluZXIpO1xuICAgIGNvbnN0ICRmbGlnaHQgPSAkY29udGFpbmVyLmZpbmQoJ2F1cm8tZmxpZ2h0Jyk7XG4gICAgXG4gICAgaWYgKCRmbGlnaHQubGVuZ3RoKSB7XG4gICAgICBkZWJ1Z0xvZyhgXFxuQW5hbHl6aW5nIGZsaWdodCBlbGVtZW50ICR7aSArIDF9OmApO1xuICAgICAgXG4gICAgICAvLyBHZXQgZmxpZ2h0IGRldGFpbHMgZnJvbSBhdHRyaWJ1dGVzXG4gICAgICBjb25zdCBmbGlnaHROdW1iZXIgPSAkZmxpZ2h0LmF0dHIoJ2ZsaWdodHMnKT8ucmVwbGFjZSgnQVMgJywgJycpIHx8ICcnO1xuICAgICAgY29uc3Qgb3JpZ2luID0gJGZsaWdodC5hdHRyKCdkZXBhcnR1cmVzdGF0aW9uJykgfHwgJ1Vua25vd24nO1xuICAgICAgY29uc3QgZGVzdGluYXRpb24gPSAkZmxpZ2h0LmF0dHIoJ2Fycml2YWxzdGF0aW9uJykgfHwgJ1Vua25vd24nO1xuICAgICAgY29uc3QgZGVwYXJ0dXJlVGltZSA9ICRmbGlnaHQuYXR0cignZGVwYXJ0dXJldGltZScpPy5zcGxpdCgnICcpWzFdIHx8ICdVbmtub3duJztcbiAgICAgIGNvbnN0IGFycml2YWxUaW1lID0gJGZsaWdodC5hdHRyKCdhcnJpdmFsdGltZScpPy5zcGxpdCgnICcpWzFdIHx8ICdVbmtub3duJztcbiAgICAgIFxuICAgICAgLy8gR2V0IHRoZSBkYXRlIGZyb20gdGhlIHRpbWVzdGFtcCBlbGVtZW50XG4gICAgICBjb25zdCBkYXRlID0gJCgnLnRpbWVzdGFtcCcpLmZpcnN0KCkudGV4dCgpLnRyaW0oKTtcbiAgICAgIFxuICAgICAgZGVidWdMb2coJ1BhcnNlZCBmbGlnaHQgZGV0YWlsczogJyArIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgZmxpZ2h0TnVtYmVyLFxuICAgICAgICBvcmlnaW4sXG4gICAgICAgIGRlc3RpbmF0aW9uLFxuICAgICAgICBkZXBhcnR1cmVUaW1lLFxuICAgICAgICBhcnJpdmFsVGltZSxcbiAgICAgICAgZGF0ZVxuICAgICAgfSkpO1xuXG4gICAgICBpZiAoZmxpZ2h0TnVtYmVyICYmIGRhdGUpIHtcbiAgICAgICAgY29uc3Qgc2VnbWVudDogRmxpZ2h0U2VnbWVudCA9IHtcbiAgICAgICAgICBmbGlnaHROdW1iZXIsXG4gICAgICAgICAgZGF0ZSxcbiAgICAgICAgICBvcmlnaW4sXG4gICAgICAgICAgZGVzdGluYXRpb24sXG4gICAgICAgICAgZGVwYXJ0dXJlVGltZSxcbiAgICAgICAgICBhcnJpdmFsVGltZVxuICAgICAgICB9O1xuICAgICAgICBcbiAgICAgICAgZGVidWdMb2coYENyZWF0ZWQgc2VnbWVudDpcbiAgICAgICAgICBGbGlnaHQ6IEFTJHtzZWdtZW50LmZsaWdodE51bWJlcn1cbiAgICAgICAgICBEYXRlOiAke3NlZ21lbnQuZGF0ZX1cbiAgICAgICAgICBSb3V0ZTogJHtzZWdtZW50Lm9yaWdpbn0g4oaSICR7c2VnbWVudC5kZXN0aW5hdGlvbn1cbiAgICAgICAgICBEZXBhcnR1cmU6ICR7c2VnbWVudC5kZXBhcnR1cmVUaW1lfVxuICAgICAgICAgIEFycml2YWw6ICR7c2VnbWVudC5hcnJpdmFsVGltZX1gKTtcbiAgICAgICAgXG4gICAgICAgIHNlZ21lbnRzLnB1c2goc2VnbWVudCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkZWJ1Z0xvZygnU2tpcHBpbmcgc2VnbWVudCBkdWUgdG8gbWlzc2luZyBkYXRhOiAnICsgSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgIGZsaWdodE51bWJlcixcbiAgICAgICAgICBkYXRlLFxuICAgICAgICAgIG9yaWdpbixcbiAgICAgICAgICBkZXN0aW5hdGlvblxuICAgICAgICB9KSk7XG4gICAgICB9XG4gICAgfVxuICB9KTtcblxuICBkZWJ1Z0xvZyhgXFxuVG90YWwgc2VnbWVudHMgZm91bmQ6ICR7c2VnbWVudHMubGVuZ3RofWApO1xuICByZXR1cm4gc2VnbWVudHM7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVdhaXRsaXN0Rm9yU2VnbWVudCgkOiBDaGVlcmlvQVBJLCBzZWdtZW50SW5kZXg6IG51bWJlcik6IFdhaXRsaXN0U25hcHNob3QgfCBudWxsIHtcbiAgZGVidWdMb2coYFxcbj09PSBQYXJzaW5nIFdhaXRsaXN0IGZvciBTZWdtZW50ICR7c2VnbWVudEluZGV4ICsgMX0gPT09YCk7XG4gIFxuICAvLyBHZXQgYWxsIGFjY29yZGlvbnNcbiAgY29uc3QgYWNjb3JkaW9ucyA9ICQoJy5hY2NvcmRpb24tY29udGFpbmVyLWZzJyk7XG4gIGRlYnVnTG9nKGBGb3VuZCAke2FjY29yZGlvbnMubGVuZ3RofSBhY2NvcmRpb24gc2VjdGlvbnNgKTtcbiAgXG4gIGNvbnN0IGFjY29yZGlvbiA9IGFjY29yZGlvbnMuZXEoc2VnbWVudEluZGV4KTtcbiAgaWYgKCFhY2NvcmRpb24ubGVuZ3RoKSB7XG4gICAgZGVidWdMb2coJ+KdjCBObyBhY2NvcmRpb24gZm91bmQgZm9yIHRoaXMgc2VnbWVudCcpO1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgLy8gRmlyc3QgdHJ5IHRvIGZpbmQgdGhlIHNwZWNpZmljIHVwZ3JhZGUgcmVxdWVzdHMgY29udGFpbmVyXG4gIGNvbnN0IHVwZ3JhZGVDb250YWluZXJzID0gYWNjb3JkaW9uLmZpbmQoJy53YWl0bGlzdC1zaW5nbGUtY29udGFpbmVyJykuZmlsdGVyKChfLCBjb250YWluZXIpID0+IHtcbiAgICByZXR1cm4gJChjb250YWluZXIpLmZpbmQoJ2g0JykudGV4dCgpLnRyaW0oKSA9PT0gJ1VwZ3JhZGUgcmVxdWVzdHMnO1xuICB9KTtcblxuICBkZWJ1Z0xvZyhgRm91bmQgJHt1cGdyYWRlQ29udGFpbmVycy5sZW5ndGh9IHNwZWNpZmljIHVwZ3JhZGUgY29udGFpbmVyc2ApO1xuXG4gIGNvbnN0IHdhaXRsaXN0SW5mbzogV2FpdGxpc3RTbmFwc2hvdCA9IHtcbiAgICBjYXBhY2l0eTogbnVsbCxcbiAgICBhdmFpbGFibGU6IG51bGwsXG4gICAgY2hlY2tlZEluOiBudWxsLFxuICAgIG5hbWVzOiBbXVxuICB9O1xuXG4gIGlmICh1cGdyYWRlQ29udGFpbmVycy5sZW5ndGgpIHtcbiAgICBjb25zdCBjb250YWluZXIgPSB1cGdyYWRlQ29udGFpbmVycy5maXJzdCgpO1xuICAgIGRlYnVnTG9nKCdcXG5Qcm9jZXNzaW5nIHVwZ3JhZGUgY29udGFpbmVyLi4uJyk7XG5cbiAgICAvLyBQYXJzZSBjYXBhY2l0eSBpbmZvXG4gICAgY29udGFpbmVyLmZpbmQoJy53YWl0bGlzdC10ZXh0LWNvbnRhaW5lciBzcGFuJykuZWFjaCgoXywgc3BhbikgPT4ge1xuICAgICAgY29uc3QgdGV4dCA9ICQoc3BhbikudGV4dCgpLnRyaW0oKTtcbiAgICAgIGRlYnVnTG9nKGBBbmFseXppbmcgY2FwYWNpdHkgdGV4dDogXCIke3RleHR9XCJgKTtcbiAgICAgIFxuICAgICAgaWYgKHRleHQuaW5jbHVkZXMoJ2NhcGFjaXR5JykpIHtcbiAgICAgICAgd2FpdGxpc3RJbmZvLmNhcGFjaXR5ID0gcGFyc2VJbnQodGV4dC5tYXRjaCgvXFxkKy8pPy5bMF0gfHwgJzAnKTtcbiAgICAgIH0gZWxzZSBpZiAodGV4dC5pbmNsdWRlcygnQXZhaWxhYmxlJykpIHtcbiAgICAgICAgd2FpdGxpc3RJbmZvLmF2YWlsYWJsZSA9IHBhcnNlSW50KHRleHQubWF0Y2goL1xcZCsvKT8uWzBdIHx8ICcwJyk7XG4gICAgICB9IGVsc2UgaWYgKHRleHQuaW5jbHVkZXMoJ0NoZWNrZWQtaW4nKSkge1xuICAgICAgICB3YWl0bGlzdEluZm8uY2hlY2tlZEluID0gcGFyc2VJbnQodGV4dC5tYXRjaCgvXFxkKy8pPy5bMF0gfHwgJzAnKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIFBhcnNlIG5hbWVzIGZyb20gdGhlIHRhYmxlXG4gICAgY29uc3Qgcm93cyA9IGNvbnRhaW5lci5maW5kKCd0YWJsZS5hdXJvX3RhYmxlIHRib2R5IHRyJyk7XG4gICAgZGVidWdMb2coYEZvdW5kICR7cm93cy5sZW5ndGh9IG5hbWUgcm93cyBpbiB0YWJsZWApO1xuICAgIFxuICAgIHJvd3MuZWFjaCgoXywgcm93KSA9PiB7XG4gICAgICBjb25zdCBuYW1lQ2VsbCA9ICQocm93KS5maW5kKCd0ZCcpLmVxKDEpO1xuICAgICAgY29uc3QgbmFtZSA9IG5hbWVDZWxsLnRleHQoKS50cmltKCk7XG4gICAgICBpZiAobmFtZSAmJiAvXltBLVpdezIsM31cXC9bQS1aXSQvLnRlc3QobmFtZSkpIHtcbiAgICAgICAgZGVidWdMb2coYOKckyBGb3VuZCB2YWxpZCBuYW1lOiAke25hbWV9YCk7XG4gICAgICAgIHdhaXRsaXN0SW5mby5uYW1lcy5wdXNoKG5hbWUpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgZGVidWdMb2coJ1xcbkZpbmFsIHdhaXRsaXN0IGluZm86ICcgKyBKU09OLnN0cmluZ2lmeSh3YWl0bGlzdEluZm8pKTtcbiAgcmV0dXJuIHdhaXRsaXN0SW5mbztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlRmxpZ2h0TnVtYmVyKGlucHV0OiBzdHJpbmcpOiBzdHJpbmcge1xuICBjb25zdCBtYXRjaCA9IGlucHV0Lm1hdGNoKC9cXGQrLyk7XG4gIHJldHVybiBtYXRjaCA/IG1hdGNoWzBdIDogJyc7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXREYXRlKGRhdGU6IERhdGUpOiBzdHJpbmcge1xuICByZXR1cm4gZGF0ZS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1ZhbGlkRmxpZ2h0TnVtYmVyKGZsaWdodE51bWJlcjogc3RyaW5nKTogYm9vbGVhbiB7XG4gIHJldHVybiAvXlxcZHszLDR9JC8udGVzdChmbGlnaHROdW1iZXIpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNWYWxpZERhdGUoZGF0ZTogc3RyaW5nKTogYm9vbGVhbiB7XG4gIGNvbnN0IGQgPSBuZXcgRGF0ZShkYXRlKTtcbiAgcmV0dXJuIGQgaW5zdGFuY2VvZiBEYXRlICYmICFpc05hTihkLmdldFRpbWUoKSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZUZsaWdodElucHV0KGZsaWdodE51bWJlcjogc3RyaW5nLCBkYXRlOiBzdHJpbmcpOiBzdHJpbmcgfCBudWxsIHtcbiAgaWYgKCFmbGlnaHROdW1iZXIgfHwgIWRhdGUpIHtcbiAgICByZXR1cm4gJ0ZsaWdodCBudW1iZXIgYW5kIGRhdGUgYXJlIHJlcXVpcmVkJztcbiAgfVxuXG4gIGlmICghaXNWYWxpZEZsaWdodE51bWJlcihmbGlnaHROdW1iZXIpKSB7XG4gICAgcmV0dXJuICdJbnZhbGlkIGZsaWdodCBudW1iZXIgZm9ybWF0JztcbiAgfVxuXG4gIGlmICghaXNWYWxpZERhdGUoZGF0ZSkpIHtcbiAgICByZXR1cm4gJ0ludmFsaWQgZGF0ZSBmb3JtYXQnO1xuICB9XG5cbiAgY29uc3QgaW5wdXREYXRlID0gbmV3IERhdGUoZGF0ZSk7XG4gIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKTtcbiAgY29uc3QgbWF4RGF0ZSA9IG5ldyBEYXRlKCk7XG4gIG1heERhdGUuc2V0RGF0ZSh0b2RheS5nZXREYXRlKCkgKyAzMzApOyAvLyBBbGFza2EgQWlybGluZXMgYWxsb3dzIGJvb2tpbmcgfjMzMCBkYXlzIGluIGFkdmFuY2VcblxuICBpZiAoaW5wdXREYXRlIDwgdG9kYXkpIHtcbiAgICByZXR1cm4gJ0RhdGUgY2Fubm90IGJlIGluIHRoZSBwYXN0JztcbiAgfVxuXG4gIGlmIChpbnB1dERhdGUgPiBtYXhEYXRlKSB7XG4gICAgcmV0dXJuICdEYXRlIGlzIHRvbyBmYXIgaW4gdGhlIGZ1dHVyZSc7XG4gIH1cblxuICByZXR1cm4gbnVsbDtcbn0gIl0sIm5hbWVzIjpbImRlYnVnTG9nIiwicGFyc2VGbGlnaHRTZWdtZW50cyIsIiQiLCJzZWdtZW50cyIsIm1haW5Sb3dzIiwibGVuZ3RoIiwiZWFjaCIsImkiLCJjb250YWluZXIiLCIkY29udGFpbmVyIiwiJGZsaWdodCIsImZpbmQiLCJmbGlnaHROdW1iZXIiLCJhdHRyIiwicmVwbGFjZSIsIm9yaWdpbiIsImRlc3RpbmF0aW9uIiwiZGVwYXJ0dXJlVGltZSIsInNwbGl0IiwiYXJyaXZhbFRpbWUiLCJkYXRlIiwiZmlyc3QiLCJ0ZXh0IiwidHJpbSIsIkpTT04iLCJzdHJpbmdpZnkiLCJzZWdtZW50IiwicHVzaCIsInBhcnNlV2FpdGxpc3RGb3JTZWdtZW50Iiwic2VnbWVudEluZGV4IiwiYWNjb3JkaW9ucyIsImFjY29yZGlvbiIsImVxIiwidXBncmFkZUNvbnRhaW5lcnMiLCJmaWx0ZXIiLCJfIiwid2FpdGxpc3RJbmZvIiwiY2FwYWNpdHkiLCJhdmFpbGFibGUiLCJjaGVja2VkSW4iLCJuYW1lcyIsInNwYW4iLCJpbmNsdWRlcyIsInBhcnNlSW50IiwibWF0Y2giLCJyb3dzIiwicm93IiwibmFtZUNlbGwiLCJuYW1lIiwidGVzdCIsInBhcnNlRmxpZ2h0TnVtYmVyIiwiaW5wdXQiLCJmb3JtYXREYXRlIiwidG9JU09TdHJpbmciLCJpc1ZhbGlkRmxpZ2h0TnVtYmVyIiwiaXNWYWxpZERhdGUiLCJkIiwiRGF0ZSIsImlzTmFOIiwiZ2V0VGltZSIsInZhbGlkYXRlRmxpZ2h0SW5wdXQiLCJpbnB1dERhdGUiLCJ0b2RheSIsIm1heERhdGUiLCJzZXREYXRlIiwiZ2V0RGF0ZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/lib/flight-utils.ts\n");

/***/ }),

/***/ "(rsc)/./app/lib/rate-limiter.ts":
/*!*********************************!*\
  !*** ./app/lib/rate-limiter.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   rateLimiter: () => (/* binding */ rateLimiter)\n/* harmony export */ });\n/**\n * Rate limiter to control scraping frequency\n * Uses a Map to track last scrape time for each flight\n */ class RateLimiter {\n    /**\n   * Check if enough time has passed since last scrape\n   * @param {string} flightKey - Unique identifier for the flight (e.g. \"AS123|2024-01-01\")\n   * @returns {boolean}\n   */ canScrape(flightKey) {\n        const now = Date.now();\n        const lastTime = this.lastScrapeTime.get(flightKey) || 0;\n        return now - lastTime >= this.intervalMs;\n    }\n    /**\n   * Get remaining time until next scrape is allowed\n   * @param {string} flightKey - Unique identifier for the flight\n   * @returns {number} Milliseconds until next scrape is allowed\n   */ getTimeUntilNextScrape(flightKey) {\n        const now = Date.now();\n        const lastTime = this.lastScrapeTime.get(flightKey) || 0;\n        const timePassed = now - lastTime;\n        return Math.max(0, this.intervalMs - timePassed);\n    }\n    /**\n   * Record a scrape attempt\n   * @param {string} flightKey - Unique identifier for the flight\n   */ recordScrape(flightKey) {\n        this.lastScrapeTime.set(flightKey, Date.now());\n    }\n    /**\n   * Clear rate limit for a specific flight\n   * @param {string} flightKey - Unique identifier for the flight\n   */ clearLimit(flightKey) {\n        this.lastScrapeTime.delete(flightKey);\n    }\n    constructor(){\n        this.lastScrapeTime = new Map();\n        this.intervalMs = 600000 // Default 10 minutes\n        ;\n    }\n}\n// Export singleton instance\nconst rateLimiter = new RateLimiter();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvbGliL3JhdGUtbGltaXRlci50cyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7OztDQUdDLEdBQ0QsTUFBTUE7SUFJSjs7OztHQUlDLEdBQ0RDLFVBQVVDLFNBQWlCLEVBQVc7UUFDcEMsTUFBTUMsTUFBTUMsS0FBS0QsR0FBRztRQUNwQixNQUFNRSxXQUFXLElBQUksQ0FBQ0MsY0FBYyxDQUFDQyxHQUFHLENBQUNMLGNBQWM7UUFDdkQsT0FBTyxNQUFPRyxZQUFhLElBQUksQ0FBQ0csVUFBVTtJQUM1QztJQUVBOzs7O0dBSUMsR0FDREMsdUJBQXVCUCxTQUFpQixFQUFVO1FBQ2hELE1BQU1DLE1BQU1DLEtBQUtELEdBQUc7UUFDcEIsTUFBTUUsV0FBVyxJQUFJLENBQUNDLGNBQWMsQ0FBQ0MsR0FBRyxDQUFDTCxjQUFjO1FBQ3ZELE1BQU1RLGFBQWFQLE1BQU1FO1FBQ3pCLE9BQU9NLEtBQUtDLEdBQUcsQ0FBQyxHQUFHLElBQUksQ0FBQ0osVUFBVSxHQUFHRTtJQUN2QztJQUVBOzs7R0FHQyxHQUNERyxhQUFhWCxTQUFpQixFQUFRO1FBQ3BDLElBQUksQ0FBQ0ksY0FBYyxDQUFDUSxHQUFHLENBQUNaLFdBQVdFLEtBQUtELEdBQUc7SUFDN0M7SUFFQTs7O0dBR0MsR0FDRFksV0FBV2IsU0FBaUIsRUFBUTtRQUNsQyxJQUFJLENBQUNJLGNBQWMsQ0FBQ1UsTUFBTSxDQUFDZDtJQUM3Qjs7YUF4Q1FJLGlCQUFzQyxJQUFJVzthQUNqQ1QsYUFBcUIsT0FBUSxxQkFBcUI7OztBQXdDckU7QUFFQSw0QkFBNEI7QUFDckIsTUFBTVUsY0FBYyxJQUFJbEIsY0FBYyIsInNvdXJjZXMiOlsid2VicGFjazovL2FsYXNrYS13YWl0bGlzdC1hcGkvLi9hcHAvbGliL3JhdGUtbGltaXRlci50cz83OGRhIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogUmF0ZSBsaW1pdGVyIHRvIGNvbnRyb2wgc2NyYXBpbmcgZnJlcXVlbmN5XG4gKiBVc2VzIGEgTWFwIHRvIHRyYWNrIGxhc3Qgc2NyYXBlIHRpbWUgZm9yIGVhY2ggZmxpZ2h0XG4gKi9cbmNsYXNzIFJhdGVMaW1pdGVyIHtcbiAgcHJpdmF0ZSBsYXN0U2NyYXBlVGltZTogTWFwPHN0cmluZywgbnVtYmVyPiA9IG5ldyBNYXAoKTtcbiAgcHJpdmF0ZSByZWFkb25seSBpbnRlcnZhbE1zOiBudW1iZXIgPSA2MDAwMDA7IC8vIERlZmF1bHQgMTAgbWludXRlc1xuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBlbm91Z2ggdGltZSBoYXMgcGFzc2VkIHNpbmNlIGxhc3Qgc2NyYXBlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBmbGlnaHRLZXkgLSBVbmlxdWUgaWRlbnRpZmllciBmb3IgdGhlIGZsaWdodCAoZS5nLiBcIkFTMTIzfDIwMjQtMDEtMDFcIilcbiAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAqL1xuICBjYW5TY3JhcGUoZmxpZ2h0S2V5OiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICAgIGNvbnN0IGxhc3RUaW1lID0gdGhpcy5sYXN0U2NyYXBlVGltZS5nZXQoZmxpZ2h0S2V5KSB8fCAwO1xuICAgIHJldHVybiAobm93IC0gbGFzdFRpbWUpID49IHRoaXMuaW50ZXJ2YWxNcztcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgcmVtYWluaW5nIHRpbWUgdW50aWwgbmV4dCBzY3JhcGUgaXMgYWxsb3dlZFxuICAgKiBAcGFyYW0ge3N0cmluZ30gZmxpZ2h0S2V5IC0gVW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoZSBmbGlnaHRcbiAgICogQHJldHVybnMge251bWJlcn0gTWlsbGlzZWNvbmRzIHVudGlsIG5leHQgc2NyYXBlIGlzIGFsbG93ZWRcbiAgICovXG4gIGdldFRpbWVVbnRpbE5leHRTY3JhcGUoZmxpZ2h0S2V5OiBzdHJpbmcpOiBudW1iZXIge1xuICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gICAgY29uc3QgbGFzdFRpbWUgPSB0aGlzLmxhc3RTY3JhcGVUaW1lLmdldChmbGlnaHRLZXkpIHx8IDA7XG4gICAgY29uc3QgdGltZVBhc3NlZCA9IG5vdyAtIGxhc3RUaW1lO1xuICAgIHJldHVybiBNYXRoLm1heCgwLCB0aGlzLmludGVydmFsTXMgLSB0aW1lUGFzc2VkKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWNvcmQgYSBzY3JhcGUgYXR0ZW1wdFxuICAgKiBAcGFyYW0ge3N0cmluZ30gZmxpZ2h0S2V5IC0gVW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoZSBmbGlnaHRcbiAgICovXG4gIHJlY29yZFNjcmFwZShmbGlnaHRLZXk6IHN0cmluZyk6IHZvaWQge1xuICAgIHRoaXMubGFzdFNjcmFwZVRpbWUuc2V0KGZsaWdodEtleSwgRGF0ZS5ub3coKSk7XG4gIH1cblxuICAvKipcbiAgICogQ2xlYXIgcmF0ZSBsaW1pdCBmb3IgYSBzcGVjaWZpYyBmbGlnaHRcbiAgICogQHBhcmFtIHtzdHJpbmd9IGZsaWdodEtleSAtIFVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGUgZmxpZ2h0XG4gICAqL1xuICBjbGVhckxpbWl0KGZsaWdodEtleTogc3RyaW5nKTogdm9pZCB7XG4gICAgdGhpcy5sYXN0U2NyYXBlVGltZS5kZWxldGUoZmxpZ2h0S2V5KTtcbiAgfVxufVxuXG4vLyBFeHBvcnQgc2luZ2xldG9uIGluc3RhbmNlXG5leHBvcnQgY29uc3QgcmF0ZUxpbWl0ZXIgPSBuZXcgUmF0ZUxpbWl0ZXIoKTsgIl0sIm5hbWVzIjpbIlJhdGVMaW1pdGVyIiwiY2FuU2NyYXBlIiwiZmxpZ2h0S2V5Iiwibm93IiwiRGF0ZSIsImxhc3RUaW1lIiwibGFzdFNjcmFwZVRpbWUiLCJnZXQiLCJpbnRlcnZhbE1zIiwiZ2V0VGltZVVudGlsTmV4dFNjcmFwZSIsInRpbWVQYXNzZWQiLCJNYXRoIiwibWF4IiwicmVjb3JkU2NyYXBlIiwic2V0IiwiY2xlYXJMaW1pdCIsImRlbGV0ZSIsIk1hcCIsInJhdGVMaW1pdGVyIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/lib/rate-limiter.ts\n");

/***/ }),

/***/ "(rsc)/./app/lib/server-utils.ts":
/*!*********************************!*\
  !*** ./app/lib/server-utils.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   debugLog: () => (/* binding */ debugLog),\n/* harmony export */   fetchWithTimeout: () => (/* binding */ fetchWithTimeout),\n/* harmony export */   logDatabaseState: () => (/* binding */ logDatabaseState)\n/* harmony export */ });\nasync function fetchWithTimeout(url, options = {}) {\n    const { timeout = 30000, ...fetchOptions } = options;\n    const controller = new AbortController();\n    const id = setTimeout(()=>controller.abort(), timeout);\n    try {\n        const response = await fetch(url, {\n            ...fetchOptions,\n            signal: controller.signal\n        });\n        clearTimeout(id);\n        return response;\n    } catch (error) {\n        clearTimeout(id);\n        throw error;\n    }\n}\nfunction debugLog(message, consoleOnly = false) {\n    const timestamp = new Date().toISOString();\n    const logMessage = `${timestamp}: ${message}`;\n    // Always log to console\n    console.log(logMessage);\n}\nasync function logDatabaseState(db) {\n    try {\n        debugLog(\"\\n=== Current Database State ===\");\n        if (!db.isDbAvailable) {\n            debugLog(\"Database is not available\");\n            return;\n        }\n        // Get all data from database\n        const data = await db.getAllData();\n        if (!data) {\n            debugLog(\"No data available from database\");\n            return;\n        }\n        // Log flights\n        debugLog(\"\\nFlights Table:\");\n        data.flights.forEach((flight)=>{\n            debugLog(`Flight AS${flight.flight_number} on ${flight.flight_date}:\n        Segment ${flight.segment_index + 1}\n        Route: ${flight.origin} → ${flight.destination}\n        Times: ${flight.departure_time} → ${flight.arrival_time}\n        Created: ${flight.created_at}`);\n        });\n        // Log snapshots\n        debugLog(\"\\nWaitlist Snapshots Table:\");\n        data.snapshots.forEach((snapshot)=>{\n            const names = JSON.parse(snapshot.waitlist_names || \"[]\");\n            debugLog(`Snapshot for AS${snapshot.flight_number} on ${snapshot.flight_date}:\n        Segment ${snapshot.segment_index + 1}\n        Names: ${names.join(\", \")}\n        First Class:\n          Capacity: ${snapshot.first_class_capacity ?? \"Unknown\"}\n          Available: ${snapshot.first_class_available ?? \"Unknown\"}\n          Checked In: ${snapshot.first_class_checked_in ?? \"Unknown\"}\n        Time: ${snapshot.snapshot_time}`);\n        });\n        debugLog(\"\\n=== End Database State ===\\n\");\n    } catch (error) {\n        debugLog(\"Error logging database state: \" + (error instanceof Error ? error.message : \"Unknown error\"));\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvbGliL3NlcnZlci11dGlscy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFNTyxlQUFlQSxpQkFBaUJDLEdBQVcsRUFBRUMsVUFBbUMsQ0FBQyxDQUFDO0lBQ3ZGLE1BQU0sRUFBRUMsVUFBVSxLQUFLLEVBQUUsR0FBR0MsY0FBYyxHQUFHRjtJQUU3QyxNQUFNRyxhQUFhLElBQUlDO0lBQ3ZCLE1BQU1DLEtBQUtDLFdBQVcsSUFBTUgsV0FBV0ksS0FBSyxJQUFJTjtJQUVoRCxJQUFJO1FBQ0YsTUFBTU8sV0FBVyxNQUFNQyxNQUFNVixLQUFLO1lBQ2hDLEdBQUdHLFlBQVk7WUFDZlEsUUFBUVAsV0FBV08sTUFBTTtRQUMzQjtRQUNBQyxhQUFhTjtRQUNiLE9BQU9HO0lBQ1QsRUFBRSxPQUFPSSxPQUFPO1FBQ2RELGFBQWFOO1FBQ2IsTUFBTU87SUFDUjtBQUNGO0FBRU8sU0FBU0MsU0FBU0MsT0FBZSxFQUFFQyxjQUFjLEtBQUs7SUFDM0QsTUFBTUMsWUFBWSxJQUFJQyxPQUFPQyxXQUFXO0lBQ3hDLE1BQU1DLGFBQWEsQ0FBQyxFQUFFSCxVQUFVLEVBQUUsRUFBRUYsUUFBUSxDQUFDO0lBRTdDLHdCQUF3QjtJQUN4Qk0sUUFBUUMsR0FBRyxDQUFDRjtBQUNkO0FBT08sZUFBZUcsaUJBQWlCQyxFQUFvQjtJQUN6RCxJQUFJO1FBQ0ZWLFNBQVM7UUFFVCxJQUFJLENBQUNVLEdBQUdDLGFBQWEsRUFBRTtZQUNyQlgsU0FBUztZQUNUO1FBQ0Y7UUFFQSw2QkFBNkI7UUFDN0IsTUFBTVksT0FBTyxNQUFNRixHQUFHRyxVQUFVO1FBQ2hDLElBQUksQ0FBQ0QsTUFBTTtZQUNUWixTQUFTO1lBQ1Q7UUFDRjtRQUVBLGNBQWM7UUFDZEEsU0FBUztRQUNUWSxLQUFLRSxPQUFPLENBQUNDLE9BQU8sQ0FBQ0MsQ0FBQUE7WUFDbkJoQixTQUFTLENBQUMsU0FBUyxFQUFFZ0IsT0FBT0MsYUFBYSxDQUFDLElBQUksRUFBRUQsT0FBT0UsV0FBVyxDQUFDO2dCQUN6RCxFQUFFRixPQUFPRyxhQUFhLEdBQUcsRUFBRTtlQUM1QixFQUFFSCxPQUFPSSxNQUFNLENBQUMsR0FBRyxFQUFFSixPQUFPSyxXQUFXLENBQUM7ZUFDeEMsRUFBRUwsT0FBT00sY0FBYyxDQUFDLEdBQUcsRUFBRU4sT0FBT08sWUFBWSxDQUFDO2lCQUMvQyxFQUFFUCxPQUFPUSxVQUFVLENBQUMsQ0FBQztRQUNsQztRQUVBLGdCQUFnQjtRQUNoQnhCLFNBQVM7UUFDVFksS0FBS2EsU0FBUyxDQUFDVixPQUFPLENBQUNXLENBQUFBO1lBQ3JCLE1BQU1DLFFBQVFDLEtBQUtDLEtBQUssQ0FBQ0gsU0FBU0ksY0FBYyxJQUFJO1lBQ3BEOUIsU0FBUyxDQUFDLGVBQWUsRUFBRTBCLFNBQVNULGFBQWEsQ0FBQyxJQUFJLEVBQUVTLFNBQVNSLFdBQVcsQ0FBQztnQkFDbkUsRUFBRVEsU0FBU1AsYUFBYSxHQUFHLEVBQUU7ZUFDOUIsRUFBRVEsTUFBTUksSUFBSSxDQUFDLE1BQU07O29CQUVkLEVBQUVMLFNBQVNNLG9CQUFvQixJQUFJLFVBQVU7cUJBQzVDLEVBQUVOLFNBQVNPLHFCQUFxQixJQUFJLFVBQVU7c0JBQzdDLEVBQUVQLFNBQVNRLHNCQUFzQixJQUFJLFVBQVU7Y0FDdkQsRUFBRVIsU0FBU1MsYUFBYSxDQUFDLENBQUM7UUFDcEM7UUFFQW5DLFNBQVM7SUFDWCxFQUFFLE9BQU9ELE9BQU87UUFDZEMsU0FBUyxtQ0FBb0NELENBQUFBLGlCQUFpQnFDLFFBQVFyQyxNQUFNRSxPQUFPLEdBQUcsZUFBYztJQUN0RztBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWxhc2thLXdhaXRsaXN0LWFwaS8uL2FwcC9saWIvc2VydmVyLXV0aWxzLnRzPzljOTMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHR5cGUgRGF0YWJhc2UgZnJvbSAnLi9kYic7XG5cbmV4cG9ydCBpbnRlcmZhY2UgRmV0Y2hXaXRoVGltZW91dE9wdGlvbnMgZXh0ZW5kcyBSZXF1ZXN0SW5pdCB7XG4gIHRpbWVvdXQ/OiBudW1iZXI7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBmZXRjaFdpdGhUaW1lb3V0KHVybDogc3RyaW5nLCBvcHRpb25zOiBGZXRjaFdpdGhUaW1lb3V0T3B0aW9ucyA9IHt9KSB7XG4gIGNvbnN0IHsgdGltZW91dCA9IDMwMDAwLCAuLi5mZXRjaE9wdGlvbnMgfSA9IG9wdGlvbnM7XG4gIFxuICBjb25zdCBjb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpO1xuICBjb25zdCBpZCA9IHNldFRpbWVvdXQoKCkgPT4gY29udHJvbGxlci5hYm9ydCgpLCB0aW1lb3V0KTtcbiAgXG4gIHRyeSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwsIHtcbiAgICAgIC4uLmZldGNoT3B0aW9ucyxcbiAgICAgIHNpZ25hbDogY29udHJvbGxlci5zaWduYWxcbiAgICB9KTtcbiAgICBjbGVhclRpbWVvdXQoaWQpO1xuICAgIHJldHVybiByZXNwb25zZTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjbGVhclRpbWVvdXQoaWQpO1xuICAgIHRocm93IGVycm9yO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkZWJ1Z0xvZyhtZXNzYWdlOiBzdHJpbmcsIGNvbnNvbGVPbmx5ID0gZmFsc2UpOiB2b2lkIHtcbiAgY29uc3QgdGltZXN0YW1wID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xuICBjb25zdCBsb2dNZXNzYWdlID0gYCR7dGltZXN0YW1wfTogJHttZXNzYWdlfWA7XG4gIFxuICAvLyBBbHdheXMgbG9nIHRvIGNvbnNvbGVcbiAgY29uc29sZS5sb2cobG9nTWVzc2FnZSk7XG59XG5cbmludGVyZmFjZSBEYXRhYmFzZUluc3RhbmNlIHtcbiAgaXNEYkF2YWlsYWJsZTogYm9vbGVhbjtcbiAgZ2V0QWxsRGF0YSgpOiBQcm9taXNlPHsgZmxpZ2h0czogYW55W107IHNuYXBzaG90czogYW55W10gfSB8IG51bGw+O1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbG9nRGF0YWJhc2VTdGF0ZShkYjogRGF0YWJhc2VJbnN0YW5jZSk6IFByb21pc2U8dm9pZD4ge1xuICB0cnkge1xuICAgIGRlYnVnTG9nKCdcXG49PT0gQ3VycmVudCBEYXRhYmFzZSBTdGF0ZSA9PT0nKTtcbiAgICBcbiAgICBpZiAoIWRiLmlzRGJBdmFpbGFibGUpIHtcbiAgICAgIGRlYnVnTG9nKCdEYXRhYmFzZSBpcyBub3QgYXZhaWxhYmxlJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gR2V0IGFsbCBkYXRhIGZyb20gZGF0YWJhc2VcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgZGIuZ2V0QWxsRGF0YSgpO1xuICAgIGlmICghZGF0YSkge1xuICAgICAgZGVidWdMb2coJ05vIGRhdGEgYXZhaWxhYmxlIGZyb20gZGF0YWJhc2UnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBMb2cgZmxpZ2h0c1xuICAgIGRlYnVnTG9nKCdcXG5GbGlnaHRzIFRhYmxlOicpO1xuICAgIGRhdGEuZmxpZ2h0cy5mb3JFYWNoKGZsaWdodCA9PiB7XG4gICAgICBkZWJ1Z0xvZyhgRmxpZ2h0IEFTJHtmbGlnaHQuZmxpZ2h0X251bWJlcn0gb24gJHtmbGlnaHQuZmxpZ2h0X2RhdGV9OlxuICAgICAgICBTZWdtZW50ICR7ZmxpZ2h0LnNlZ21lbnRfaW5kZXggKyAxfVxuICAgICAgICBSb3V0ZTogJHtmbGlnaHQub3JpZ2lufSDihpIgJHtmbGlnaHQuZGVzdGluYXRpb259XG4gICAgICAgIFRpbWVzOiAke2ZsaWdodC5kZXBhcnR1cmVfdGltZX0g4oaSICR7ZmxpZ2h0LmFycml2YWxfdGltZX1cbiAgICAgICAgQ3JlYXRlZDogJHtmbGlnaHQuY3JlYXRlZF9hdH1gKTtcbiAgICB9KTtcblxuICAgIC8vIExvZyBzbmFwc2hvdHNcbiAgICBkZWJ1Z0xvZygnXFxuV2FpdGxpc3QgU25hcHNob3RzIFRhYmxlOicpO1xuICAgIGRhdGEuc25hcHNob3RzLmZvckVhY2goc25hcHNob3QgPT4ge1xuICAgICAgY29uc3QgbmFtZXMgPSBKU09OLnBhcnNlKHNuYXBzaG90LndhaXRsaXN0X25hbWVzIHx8ICdbXScpO1xuICAgICAgZGVidWdMb2coYFNuYXBzaG90IGZvciBBUyR7c25hcHNob3QuZmxpZ2h0X251bWJlcn0gb24gJHtzbmFwc2hvdC5mbGlnaHRfZGF0ZX06XG4gICAgICAgIFNlZ21lbnQgJHtzbmFwc2hvdC5zZWdtZW50X2luZGV4ICsgMX1cbiAgICAgICAgTmFtZXM6ICR7bmFtZXMuam9pbignLCAnKX1cbiAgICAgICAgRmlyc3QgQ2xhc3M6XG4gICAgICAgICAgQ2FwYWNpdHk6ICR7c25hcHNob3QuZmlyc3RfY2xhc3NfY2FwYWNpdHkgPz8gJ1Vua25vd24nfVxuICAgICAgICAgIEF2YWlsYWJsZTogJHtzbmFwc2hvdC5maXJzdF9jbGFzc19hdmFpbGFibGUgPz8gJ1Vua25vd24nfVxuICAgICAgICAgIENoZWNrZWQgSW46ICR7c25hcHNob3QuZmlyc3RfY2xhc3NfY2hlY2tlZF9pbiA/PyAnVW5rbm93bid9XG4gICAgICAgIFRpbWU6ICR7c25hcHNob3Quc25hcHNob3RfdGltZX1gKTtcbiAgICB9KTtcbiAgICBcbiAgICBkZWJ1Z0xvZygnXFxuPT09IEVuZCBEYXRhYmFzZSBTdGF0ZSA9PT1cXG4nKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBkZWJ1Z0xvZygnRXJyb3IgbG9nZ2luZyBkYXRhYmFzZSBzdGF0ZTogJyArIChlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJykpO1xuICB9XG59ICJdLCJuYW1lcyI6WyJmZXRjaFdpdGhUaW1lb3V0IiwidXJsIiwib3B0aW9ucyIsInRpbWVvdXQiLCJmZXRjaE9wdGlvbnMiLCJjb250cm9sbGVyIiwiQWJvcnRDb250cm9sbGVyIiwiaWQiLCJzZXRUaW1lb3V0IiwiYWJvcnQiLCJyZXNwb25zZSIsImZldGNoIiwic2lnbmFsIiwiY2xlYXJUaW1lb3V0IiwiZXJyb3IiLCJkZWJ1Z0xvZyIsIm1lc3NhZ2UiLCJjb25zb2xlT25seSIsInRpbWVzdGFtcCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsImxvZ01lc3NhZ2UiLCJjb25zb2xlIiwibG9nIiwibG9nRGF0YWJhc2VTdGF0ZSIsImRiIiwiaXNEYkF2YWlsYWJsZSIsImRhdGEiLCJnZXRBbGxEYXRhIiwiZmxpZ2h0cyIsImZvckVhY2giLCJmbGlnaHQiLCJmbGlnaHRfbnVtYmVyIiwiZmxpZ2h0X2RhdGUiLCJzZWdtZW50X2luZGV4Iiwib3JpZ2luIiwiZGVzdGluYXRpb24iLCJkZXBhcnR1cmVfdGltZSIsImFycml2YWxfdGltZSIsImNyZWF0ZWRfYXQiLCJzbmFwc2hvdHMiLCJzbmFwc2hvdCIsIm5hbWVzIiwiSlNPTiIsInBhcnNlIiwid2FpdGxpc3RfbmFtZXMiLCJqb2luIiwiZmlyc3RfY2xhc3NfY2FwYWNpdHkiLCJmaXJzdF9jbGFzc19hdmFpbGFibGUiLCJmaXJzdF9jbGFzc19jaGVja2VkX2luIiwic25hcHNob3RfdGltZSIsIkVycm9yIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/lib/server-utils.ts\n");

/***/ }),

/***/ "(rsc)/./app/lib/waitlist.ts":
/*!*****************************!*\
  !*** ./app/lib/waitlist.ts ***!
  \*****************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getCachedWaitlist: () => (/* binding */ getCachedWaitlist),\n/* harmony export */   trackWaitlist: () => (/* binding */ trackWaitlist)\n/* harmony export */ });\n/* harmony import */ var _browser_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./browser-utils */ \"(rsc)/./app/lib/browser-utils.ts\");\n/* harmony import */ var _flight_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./flight-utils */ \"(rsc)/./app/lib/flight-utils.ts\");\n/* harmony import */ var _db__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./db */ \"(rsc)/./app/lib/db.ts\");\n/* harmony import */ var _server_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./server-utils */ \"(rsc)/./app/lib/server-utils.ts\");\n/* harmony import */ var cheerio__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! cheerio */ \"(rsc)/./node_modules/cheerio/dist/esm/index.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_db__WEBPACK_IMPORTED_MODULE_2__]);\n_db__WEBPACK_IMPORTED_MODULE_2__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\n\nasync function getPageContent(page) {\n    try {\n        return await page.content();\n    } catch (error) {\n        (0,_server_utils__WEBPACK_IMPORTED_MODULE_3__.debugLog)(\"Error getting page content: \" + (error instanceof Error ? error.message : \"Unknown error\"));\n        return \"\";\n    }\n}\nasync function trackWaitlist(flightNumber, flightDate, userName) {\n    let page;\n    try {\n        page = await (0,_browser_utils__WEBPACK_IMPORTED_MODULE_0__.createPage)();\n        const url = `https://www.alaskaair.com/status/${flightNumber}/${flightDate}`;\n        (0,_server_utils__WEBPACK_IMPORTED_MODULE_3__.debugLog)(`Navigating to ${url}`);\n        await page.goto(url, {\n            waitUntil: \"networkidle0\",\n            timeout: 30000\n        });\n        if (await (0,_browser_utils__WEBPACK_IMPORTED_MODULE_0__.needsVerification)(page)) {\n            (0,_server_utils__WEBPACK_IMPORTED_MODULE_3__.debugLog)(\"Verification needed, attempting to handle...\");\n            const verificationSuccess = await (0,_browser_utils__WEBPACK_IMPORTED_MODULE_0__.handlePressAndHoldVerification)(page);\n            if (!verificationSuccess) {\n                throw new Error(\"Failed to complete verification\");\n            }\n            await page.waitForSelector(\".waitlist-text-container\", {\n                timeout: 2000\n            }).catch(()=>{});\n        }\n        const content = await getPageContent(page);\n        const $ = cheerio__WEBPACK_IMPORTED_MODULE_4__.load(content);\n        // Parse flight segments\n        const segments = (0,_flight_utils__WEBPACK_IMPORTED_MODULE_1__.parseFlightSegments)($);\n        if (!segments.length) {\n            throw new Error(\"No flight segments found\");\n        }\n        (0,_server_utils__WEBPACK_IMPORTED_MODULE_3__.debugLog)(`Found ${segments.length} flight segments`);\n        // Process each segment\n        const processedSegments = [];\n        for(let i = 0; i < segments.length; i++){\n            const segment = segments[i];\n            (0,_server_utils__WEBPACK_IMPORTED_MODULE_3__.debugLog)(`Processing segment ${i + 1}: ${segment.flightNumber} from ${segment.origin} to ${segment.destination}`);\n            // Get waitlist info for this segment\n            const waitlistInfo = (0,_flight_utils__WEBPACK_IMPORTED_MODULE_1__.parseWaitlistForSegment)($, i);\n            // Save to database\n            const flightId = await _db__WEBPACK_IMPORTED_MODULE_2__[\"default\"].saveFlightSegment(segment, i);\n            if (flightId && waitlistInfo) {\n                await _db__WEBPACK_IMPORTED_MODULE_2__[\"default\"].saveWaitlistSnapshot(flightId, waitlistInfo);\n            }\n            // Calculate position and total\n            const nameIndex = waitlistInfo?.names.findIndex((name)=>name === userName) ?? -1;\n            const position = nameIndex !== -1 ? nameIndex + 1 : null;\n            const totalWaitlisted = waitlistInfo?.names.length ?? null;\n            processedSegments.push({\n                ...segment,\n                position,\n                totalWaitlisted\n            });\n        }\n        return {\n            segments: processedSegments\n        };\n    } catch (error) {\n        const errorMessage = error instanceof Error ? error.message : \"Unknown error occurred\";\n        (0,_server_utils__WEBPACK_IMPORTED_MODULE_3__.debugLog)(\"Error tracking waitlist: \" + errorMessage);\n        return {\n            segments: [\n                {\n                    flightNumber,\n                    date: flightDate,\n                    origin: \"Unknown\",\n                    destination: \"Unknown\",\n                    departureTime: \"Unknown\",\n                    arrivalTime: \"Unknown\",\n                    position: null,\n                    totalWaitlisted: null,\n                    error: errorMessage\n                }\n            ],\n            error: errorMessage\n        };\n    } finally{\n        if (page) {\n            await page.close().catch((error)=>{\n                (0,_server_utils__WEBPACK_IMPORTED_MODULE_3__.debugLog)(\"Error closing page: \" + (error instanceof Error ? error.message : \"Unknown error\"));\n            });\n        }\n    }\n}\nasync function getCachedWaitlist(flightNumber, flightDate) {\n    if (!flightNumber || !flightDate) {\n        throw new Error(\"Missing required fields.\");\n    }\n    try {\n        return await _db__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getLatestWaitlistData(flightNumber, flightDate);\n    } catch (error) {\n        (0,_server_utils__WEBPACK_IMPORTED_MODULE_3__.debugLog)(\"Error getting cached waitlist: \" + (error instanceof Error ? error.message : \"Unknown error\"));\n        throw error;\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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UUEsQ0FBQyw4QkFBOEJ1QztRQUV2QyxPQUFPO1lBQ0xsQixVQUFVO2dCQUFDO29CQUNUWjtvQkFDQStCLE1BQU05QjtvQkFDTmdCLFFBQVE7b0JBQ1JDLGFBQWE7b0JBQ2JjLGVBQWU7b0JBQ2ZDLGFBQWE7b0JBQ2JOLFVBQVU7b0JBQ1ZDLGlCQUFpQjtvQkFDakJoQyxPQUFPa0M7Z0JBQ1Q7YUFBRTtZQUNGbEMsT0FBT2tDO1FBQ1Q7SUFDRixTQUFVO1FBQ1IsSUFBSXBDLE1BQU07WUFDUixNQUFNQSxLQUFLd0MsS0FBSyxHQUFHekIsS0FBSyxDQUFDYixDQUFBQTtnQkFDdkJMLHVEQUFRQSxDQUFDLHlCQUEwQkssQ0FBQUEsaUJBQWlCQyxRQUFRRCxNQUFNRSxPQUFPLEdBQUcsZUFBYztZQUM1RjtRQUNGO0lBQ0Y7QUFDRjtBQUVPLGVBQWVxQyxrQkFBa0JuQyxZQUFvQixFQUFFQyxVQUFrQjtJQUM5RSxJQUFJLENBQUNELGdCQUFnQixDQUFDQyxZQUFZO1FBQ2hDLE1BQU0sSUFBSUosTUFBTTtJQUNsQjtJQUVBLElBQUk7UUFDRixPQUFPLE1BQU1QLDJDQUFFQSxDQUFDOEMscUJBQXFCLENBQUNwQyxjQUFjQztJQUN0RCxFQUFFLE9BQU9MLE9BQU87UUFDZEwsdURBQVFBLENBQUMsb0NBQXFDSyxDQUFBQSxpQkFBaUJDLFFBQVFELE1BQU1FLE9BQU8sR0FBRyxlQUFjO1FBQ3JHLE1BQU1GO0lBQ1I7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2FsYXNrYS13YWl0bGlzdC1hcGkvLi9hcHAvbGliL3dhaXRsaXN0LnRzPzMzOWQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGFnZSB9IGZyb20gJ3B1cHBldGVlcic7XG5pbXBvcnQgeyBDaGVlcmlvQVBJIH0gZnJvbSAnY2hlZXJpbyc7XG5pbXBvcnQgeyBjcmVhdGVQYWdlLCBuZWVkc1ZlcmlmaWNhdGlvbiwgaGFuZGxlUHJlc3NBbmRIb2xkVmVyaWZpY2F0aW9uIH0gZnJvbSAnLi9icm93c2VyLXV0aWxzJztcbmltcG9ydCB7IHBhcnNlRmxpZ2h0U2VnbWVudHMsIHBhcnNlV2FpdGxpc3RGb3JTZWdtZW50IH0gZnJvbSAnLi9mbGlnaHQtdXRpbHMnO1xuaW1wb3J0IGRiIGZyb20gJy4vZGInO1xuaW1wb3J0IHsgZGVidWdMb2cgfSBmcm9tICcuL3NlcnZlci11dGlscyc7XG5pbXBvcnQgKiBhcyBjaGVlcmlvIGZyb20gJ2NoZWVyaW8nO1xuXG5leHBvcnQgaW50ZXJmYWNlIFdhaXRsaXN0U2VnbWVudCB7XG4gIGZsaWdodE51bWJlcjogc3RyaW5nO1xuICBkYXRlOiBzdHJpbmc7XG4gIG9yaWdpbjogc3RyaW5nO1xuICBkZXN0aW5hdGlvbjogc3RyaW5nO1xuICBkZXBhcnR1cmVUaW1lOiBzdHJpbmc7XG4gIGFycml2YWxUaW1lOiBzdHJpbmc7XG4gIHBvc2l0aW9uOiBudW1iZXIgfCBudWxsO1xuICB0b3RhbFdhaXRsaXN0ZWQ6IG51bWJlciB8IG51bGw7XG4gIGVycm9yPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFdhaXRsaXN0UmVzdWx0IHtcbiAgc2VnbWVudHM6IFdhaXRsaXN0U2VnbWVudFtdO1xuICBlcnJvcj86IHN0cmluZztcbn1cblxuYXN5bmMgZnVuY3Rpb24gZ2V0UGFnZUNvbnRlbnQocGFnZTogUGFnZSk6IFByb21pc2U8c3RyaW5nPiB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIGF3YWl0IHBhZ2UuY29udGVudCgpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGRlYnVnTG9nKCdFcnJvciBnZXR0aW5nIHBhZ2UgY29udGVudDogJyArIChlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJykpO1xuICAgIHJldHVybiAnJztcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdHJhY2tXYWl0bGlzdChcbiAgZmxpZ2h0TnVtYmVyOiBzdHJpbmcsXG4gIGZsaWdodERhdGU6IHN0cmluZyxcbiAgdXNlck5hbWU6IHN0cmluZ1xuKTogUHJvbWlzZTxXYWl0bGlzdFJlc3VsdD4ge1xuICBsZXQgcGFnZTogUGFnZSB8IHVuZGVmaW5lZDtcbiAgXG4gIHRyeSB7XG4gICAgcGFnZSA9IGF3YWl0IGNyZWF0ZVBhZ2UoKTtcbiAgICBjb25zdCB1cmwgPSBgaHR0cHM6Ly93d3cuYWxhc2thYWlyLmNvbS9zdGF0dXMvJHtmbGlnaHROdW1iZXJ9LyR7ZmxpZ2h0RGF0ZX1gO1xuICAgIFxuICAgIGRlYnVnTG9nKGBOYXZpZ2F0aW5nIHRvICR7dXJsfWApO1xuICAgIGF3YWl0IHBhZ2UuZ290byh1cmwsIHsgd2FpdFVudGlsOiAnbmV0d29ya2lkbGUwJywgdGltZW91dDogMzAwMDAgfSk7XG4gICAgXG4gICAgaWYgKGF3YWl0IG5lZWRzVmVyaWZpY2F0aW9uKHBhZ2UpKSB7XG4gICAgICBkZWJ1Z0xvZygnVmVyaWZpY2F0aW9uIG5lZWRlZCwgYXR0ZW1wdGluZyB0byBoYW5kbGUuLi4nKTtcbiAgICAgIGNvbnN0IHZlcmlmaWNhdGlvblN1Y2Nlc3MgPSBhd2FpdCBoYW5kbGVQcmVzc0FuZEhvbGRWZXJpZmljYXRpb24ocGFnZSk7XG4gICAgICBpZiAoIXZlcmlmaWNhdGlvblN1Y2Nlc3MpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gY29tcGxldGUgdmVyaWZpY2F0aW9uJyk7XG4gICAgICB9XG4gICAgICBhd2FpdCBwYWdlLndhaXRGb3JTZWxlY3RvcignLndhaXRsaXN0LXRleHQtY29udGFpbmVyJywgeyB0aW1lb3V0OiAyMDAwIH0pLmNhdGNoKCgpID0+IHt9KTtcbiAgICB9XG5cbiAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgZ2V0UGFnZUNvbnRlbnQocGFnZSk7XG4gICAgY29uc3QgJCA9IGNoZWVyaW8ubG9hZChjb250ZW50KTtcblxuICAgIC8vIFBhcnNlIGZsaWdodCBzZWdtZW50c1xuICAgIGNvbnN0IHNlZ21lbnRzID0gcGFyc2VGbGlnaHRTZWdtZW50cygkKTtcbiAgICBpZiAoIXNlZ21lbnRzLmxlbmd0aCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBmbGlnaHQgc2VnbWVudHMgZm91bmQnKTtcbiAgICB9XG5cbiAgICBkZWJ1Z0xvZyhgRm91bmQgJHtzZWdtZW50cy5sZW5ndGh9IGZsaWdodCBzZWdtZW50c2ApO1xuXG4gICAgLy8gUHJvY2VzcyBlYWNoIHNlZ21lbnRcbiAgICBjb25zdCBwcm9jZXNzZWRTZWdtZW50czogV2FpdGxpc3RTZWdtZW50W10gPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNlZ21lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBzZWdtZW50ID0gc2VnbWVudHNbaV07XG4gICAgICBkZWJ1Z0xvZyhgUHJvY2Vzc2luZyBzZWdtZW50ICR7aSArIDF9OiAke3NlZ21lbnQuZmxpZ2h0TnVtYmVyfSBmcm9tICR7c2VnbWVudC5vcmlnaW59IHRvICR7c2VnbWVudC5kZXN0aW5hdGlvbn1gKTtcblxuICAgICAgLy8gR2V0IHdhaXRsaXN0IGluZm8gZm9yIHRoaXMgc2VnbWVudFxuICAgICAgY29uc3Qgd2FpdGxpc3RJbmZvID0gcGFyc2VXYWl0bGlzdEZvclNlZ21lbnQoJCwgaSk7XG4gICAgICBcbiAgICAgIC8vIFNhdmUgdG8gZGF0YWJhc2VcbiAgICAgIGNvbnN0IGZsaWdodElkID0gYXdhaXQgZGIuc2F2ZUZsaWdodFNlZ21lbnQoc2VnbWVudCwgaSk7XG4gICAgICBpZiAoZmxpZ2h0SWQgJiYgd2FpdGxpc3RJbmZvKSB7XG4gICAgICAgIGF3YWl0IGRiLnNhdmVXYWl0bGlzdFNuYXBzaG90KGZsaWdodElkLCB3YWl0bGlzdEluZm8pO1xuICAgICAgfVxuXG4gICAgICAvLyBDYWxjdWxhdGUgcG9zaXRpb24gYW5kIHRvdGFsXG4gICAgICBjb25zdCBuYW1lSW5kZXggPSB3YWl0bGlzdEluZm8/Lm5hbWVzLmZpbmRJbmRleChuYW1lID0+IG5hbWUgPT09IHVzZXJOYW1lKSA/PyAtMTtcbiAgICAgIGNvbnN0IHBvc2l0aW9uID0gbmFtZUluZGV4ICE9PSAtMSA/IG5hbWVJbmRleCArIDEgOiBudWxsO1xuICAgICAgY29uc3QgdG90YWxXYWl0bGlzdGVkID0gd2FpdGxpc3RJbmZvPy5uYW1lcy5sZW5ndGggPz8gbnVsbDtcblxuICAgICAgcHJvY2Vzc2VkU2VnbWVudHMucHVzaCh7XG4gICAgICAgIC4uLnNlZ21lbnQsXG4gICAgICAgIHBvc2l0aW9uLFxuICAgICAgICB0b3RhbFdhaXRsaXN0ZWQsXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgc2VnbWVudHM6IHByb2Nlc3NlZFNlZ21lbnRzXG4gICAgfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yIG9jY3VycmVkJztcbiAgICBkZWJ1Z0xvZygnRXJyb3IgdHJhY2tpbmcgd2FpdGxpc3Q6ICcgKyBlcnJvck1lc3NhZ2UpO1xuICAgIFxuICAgIHJldHVybiB7XG4gICAgICBzZWdtZW50czogW3tcbiAgICAgICAgZmxpZ2h0TnVtYmVyLFxuICAgICAgICBkYXRlOiBmbGlnaHREYXRlLFxuICAgICAgICBvcmlnaW46ICdVbmtub3duJyxcbiAgICAgICAgZGVzdGluYXRpb246ICdVbmtub3duJyxcbiAgICAgICAgZGVwYXJ0dXJlVGltZTogJ1Vua25vd24nLFxuICAgICAgICBhcnJpdmFsVGltZTogJ1Vua25vd24nLFxuICAgICAgICBwb3NpdGlvbjogbnVsbCxcbiAgICAgICAgdG90YWxXYWl0bGlzdGVkOiBudWxsLFxuICAgICAgICBlcnJvcjogZXJyb3JNZXNzYWdlXG4gICAgICB9XSxcbiAgICAgIGVycm9yOiBlcnJvck1lc3NhZ2VcbiAgICB9O1xuICB9IGZpbmFsbHkge1xuICAgIGlmIChwYWdlKSB7XG4gICAgICBhd2FpdCBwYWdlLmNsb3NlKCkuY2F0Y2goZXJyb3IgPT4ge1xuICAgICAgICBkZWJ1Z0xvZygnRXJyb3IgY2xvc2luZyBwYWdlOiAnICsgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InKSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldENhY2hlZFdhaXRsaXN0KGZsaWdodE51bWJlcjogc3RyaW5nLCBmbGlnaHREYXRlOiBzdHJpbmcpIHtcbiAgaWYgKCFmbGlnaHROdW1iZXIgfHwgIWZsaWdodERhdGUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgZmllbGRzLicpO1xuICB9XG5cbiAgdHJ5IHtcbiAgICByZXR1cm4gYXdhaXQgZGIuZ2V0TGF0ZXN0V2FpdGxpc3REYXRhKGZsaWdodE51bWJlciwgZmxpZ2h0RGF0ZSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgZGVidWdMb2coJ0Vycm9yIGdldHRpbmcgY2FjaGVkIHdhaXRsaXN0OiAnICsgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InKSk7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn0gIl0sIm5hbWVzIjpbImNyZWF0ZVBhZ2UiLCJuZWVkc1ZlcmlmaWNhdGlvbiIsImhhbmRsZVByZXNzQW5kSG9sZFZlcmlmaWNhdGlvbiIsInBhcnNlRmxpZ2h0U2VnbWVudHMiLCJwYXJzZVdhaXRsaXN0Rm9yU2VnbWVudCIsImRiIiwiZGVidWdMb2ciLCJjaGVlcmlvIiwiZ2V0UGFnZUNvbnRlbnQiLCJwYWdlIiwiY29udGVudCIsImVycm9yIiwiRXJyb3IiLCJtZXNzYWdlIiwidHJhY2tXYWl0bGlzdCIsImZsaWdodE51bWJlciIsImZsaWdodERhdGUiLCJ1c2VyTmFtZSIsInVybCIsImdvdG8iLCJ3YWl0VW50aWwiLCJ0aW1lb3V0IiwidmVyaWZpY2F0aW9uU3VjY2VzcyIsIndhaXRGb3JTZWxlY3RvciIsImNhdGNoIiwiJCIsImxvYWQiLCJzZWdtZW50cyIsImxlbmd0aCIsInByb2Nlc3NlZFNlZ21lbnRzIiwiaSIsInNlZ21lbnQiLCJvcmlnaW4iLCJkZXN0aW5hdGlvbiIsIndhaXRsaXN0SW5mbyIsImZsaWdodElkIiwic2F2ZUZsaWdodFNlZ21lbnQiLCJzYXZlV2FpdGxpc3RTbmFwc2hvdCIsIm5hbWVJbmRleCIsIm5hbWVzIiwiZmluZEluZGV4IiwibmFtZSIsInBvc2l0aW9uIiwidG90YWxXYWl0bGlzdGVkIiwicHVzaCIsImVycm9yTWVzc2FnZSIsImRhdGUiLCJkZXBhcnR1cmVUaW1lIiwiYXJyaXZhbFRpbWUiLCJjbG9zZSIsImdldENhY2hlZFdhaXRsaXN0IiwiZ2V0TGF0ZXN0V2FpdGxpc3REYXRhIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/lib/waitlist.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/undici","vendor-chunks/iconv-lite","vendor-chunks/cheerio","vendor-chunks/parse5","vendor-chunks/css-select","vendor-chunks/entities","vendor-chunks/domutils","vendor-chunks/sqlite","vendor-chunks/whatwg-mimetype","vendor-chunks/nth-check","vendor-chunks/htmlparser2","vendor-chunks/cheerio-select","vendor-chunks/whatwg-encoding","vendor-chunks/encoding-sniffer","vendor-chunks/domhandler","vendor-chunks/dom-serializer","vendor-chunks/css-what","vendor-chunks/parse5-parser-stream","vendor-chunks/parse5-htmlparser2-tree-adapter","vendor-chunks/domelementtype","vendor-chunks/safer-buffer","vendor-chunks/boolbase"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2FtrackWaitlist%2Froute&page=%2Fapi%2FtrackWaitlist%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2FtrackWaitlist%2Froute.ts&appDir=%2FUsers%2Fviviku%2FDownloads%2Falaska_waitlist_api%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fviviku%2FDownloads%2Falaska_waitlist_api&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();